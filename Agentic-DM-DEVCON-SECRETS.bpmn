<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" xmlns:color="http://www.omg.org/spec/BPMN/non-normative/color/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.40.1" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.8.0">
  <bpmn:process id="Process_0cm02vc" name="Liferay Agentic Dungeon Master" isExecutable="true">
    <bpmn:extensionElements />
    <bpmn:endEvent id="Event_03mf5ec" name="Message Delivered">
      <bpmn:incoming>Flow_11wnglx</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:adHocSubProcess id="aiTools" name="Dungeon Master AI Tools">
      <bpmn:extensionElements>
        <zeebe:adHoc activeElementsCollection="=[toolCall._meta.name]" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0sbvwpf</bpmn:incoming>
      <bpmn:outgoing>Flow_1rupk0u</bpmn:outgoing>
      <bpmn:multiInstanceLoopCharacteristics>
        <bpmn:extensionElements>
          <zeebe:loopCharacteristics inputCollection="=agent.toolCalls" inputElement="toolCall" outputCollection="toolCallResults" outputElement="={id: toolCall._meta.id, name: toolCall._meta.name, content: toolCallResult}" />
        </bpmn:extensionElements>
      </bpmn:multiInstanceLoopCharacteristics>
      <bpmn:serviceTask id="AIRulesAndLore" name="Clarify Rules &#38; Lore" zeebe:modelerTemplate="io.camunda.connectors.OpenAI.v1" zeebe:modelerTemplateVersion="6" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjU2cHgiIGhlaWdodD0iMjYwcHgiIHZpZXdCb3g9IjAgMCAyNTYgMjYwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KICAgIDx0aXRsZT5PcGVuQUk8L3RpdGxlPgogICAgPGc+CiAgICAgICAgPHBhdGggZD0iTTIzOS4xODM5MTQsMTA2LjIwMjc4MyBDMjQ1LjA1NDMwNCw4OC41MjQyMDk2IDI0My4wMjIyOCw2OS4xNzMzODA1IDIzMy42MDc1OTksNTMuMDk5ODg2NCBDMjE5LjQ1MTY3OCwyOC40NTg4MDIxIDE5MC45OTk3MDMsMTUuNzgzNjEyOSAxNjMuMjEzMDA3LDIxLjczOTUwNSBDMTQ3LjU1NDA3Nyw0LjMyMTQ1ODgzIDEyMy43OTQ5MDksLTMuNDIzOTg1NTQgMTAwLjg3OTAxLDEuNDE4NzM4OTggQzc3Ljk2MzExMDUsNi4yNjE0NjM0OSA1OS4zNjkwMDkzLDIyLjk1NzI1MzYgNTIuMDk1OTYyMSw0NS4yMjE0MjE5IEMzMy44NDM2NDk0LDQ4Ljk2NDQ4NjcgMTguMDkwMTcyMSw2MC4zOTI3NDkgOC44NjY3MjUxMyw3Ni41ODE4MDMzIEMtNS40NDM0OTEsMTAxLjE4Mjk2MiAtMi4xOTU0NDQzMSwxMzIuMjE1MjU1IDE2Ljg5ODY2NjIsMTUzLjMyMDA5NCBDMTEuMDA2MDg2NSwxNzAuOTkwNjU2IDEzLjAxOTcyODMsMTkwLjM0Mzk5MSAyMi40MjM4MjMxLDIwNi40MjI5OTEgQzM2LjU5NzU1NTMsMjMxLjA3MjM0NCA2NS4wNjgwMzQyLDI0My43NDY1NjYgOTIuODY5NTczOCwyMzcuNzgzMzcyIEMxMDUuMjM1NjM5LDI1MS43MDgyNDkgMTIzLjAwMTExMywyNTkuNjMwOTQyIDE0MS42MjM5NjgsMjU5LjUyNjkyIEMxNzAuMTA1MzU5LDI1OS41NTIxNjkgMTk1LjMzNzYxMSwyNDEuMTY1NzE4IDIwNC4wMzc3NzcsMjE0LjA0NTY2MSBDMjIyLjI4NzM0LDIxMC4yOTYzNTYgMjM4LjAzODQ4OSwxOTguODY5NzgzIDI0Ny4yNjcwMTQsMTgyLjY4NTI4IEMyNjEuNDA0NDUzLDE1OC4xMjc1MTUgMjU4LjE0MjQ5NCwxMjcuMjYyNzc1IDIzOS4xODM5MTQsMTA2LjIwMjc4MyBMMjM5LjE4MzkxNCwxMDYuMjAyNzgzIFogTTE0MS42MjM5NjgsMjQyLjU0MTIwNyBDMTMwLjI1NTY4MiwyNDIuNTU5MTc3IDExOS4yNDM4NzYsMjM4LjU3NDY0MiAxMTAuNTE5MzgxLDIzMS4yODYxOTcgTDExMi4wNTQxNDYsMjMwLjQxNjQ5NiBMMTYzLjcyNDU5NSwyMDAuNTkwODgxIEMxNjYuMzQwNjQ4LDE5OS4wNTY0NDQgMTY3Ljk1NDMyMSwxOTYuMjU2ODE4IDE2Ny45NzA3ODEsMTkzLjIyNDAwNSBMMTY3Ljk3MDc4MSwxMjAuMzczNzg4IEwxODkuODE1NjE0LDEzMy4wMTAwMjYgQzE5MC4wMzQxMzIsMTMzLjEyMTQyMyAxOTAuMTg2MjM1LDEzMy4zMzA1NjQgMTkwLjIyNDg4NSwxMzMuNTcyNzc0IEwxOTAuMjI0ODg1LDE5My45NDAyMjkgQzE5MC4xNjg2MDMsMjIwLjc1ODQyNyAxNjguNDQyMTY2LDI0Mi40ODQ4NjQgMTQxLjYyMzk2OCwyNDIuNTQxMjA3IFogTTM3LjE1NzU3NDksMTk3LjkzMDYyIEMzMS40NTY0OTgsMTg4LjA4NjM1OSAyOS40MDk0ODE4LDE3Ni41NDY5ODQgMzEuMzc2NjIzNywxNjUuMzQyNDI2IEwzMi45MTEzODk1LDE2Ni4yNjMyODUgTDg0LjYzMjk5NzMsMTk2LjA4ODkwMSBDODcuMjM4OTM0OSwxOTcuNjE4MjA3IDkwLjQ2ODI3MTcsMTk3LjYxODIwNyA5My4wNzQyMDkzLDE5Ni4wODg5MDEgTDE1Ni4yNTU0MDIsMTU5LjY2Mzc5MyBMMTU2LjI1NTQwMiwxODQuODg1MTExIEMxNTYuMjQzNTU3LDE4NS4xNDk3NzEgMTU2LjExMTcyNSwxODUuMzk0NjAyIDE1NS44OTcyOSwxODUuNTUwMTc2IEwxMDMuNTYxNzc2LDIxNS43MzM5MDMgQzgwLjMwNTQ5NTMsMjI5LjEzMTYzMiA1MC41OTI0OTU0LDIyMS4xNjU0MzUgMzcuMTU3NTc0OSwxOTcuOTMwNjIgWiBNMjMuNTQ5MzE4MSw4NS4zODExMjczIEMyOS4yODk5ODYxLDc1LjQ3MzMwOTcgMzguMzUxMTkxMSw2Ny45MTYyNjQ4IDQ5LjEyODc0ODIsNjQuMDQ3ODgyNSBMNDkuMTI4NzQ4MiwxMjUuNDM4NTE1IEM0OS4wODkxNDkyLDEyOC40NTk0MjUgNTAuNjk2NTM4NiwxMzEuMjYyNTU2IDUzLjMyMzc3NDgsMTMyLjc1NDIzMiBMMTE2LjE5ODAxNCwxNjkuMDI1ODY0IEw5NC4zNTMxODA4LDE4MS42NjIxMDIgQzk0LjExMzIzMjUsMTgxLjc4OTQzNCA5My44MjU3NDYxLDE4MS43ODk0MzQgOTMuNTg1Nzk3OSwxODEuNjYyMTAyIEw0MS4zNTI2MDE1LDE1MS41Mjk1MzQgQzE4LjE0MTk0MjYsMTM4LjA3NjA5OCAxMC4xODE3NjgxLDEwOC4zODU1NjIgMjMuNTQ5MzE4MSw4NS4xMjUzMzMgTDIzLjU0OTMxODEsODUuMzgxMTI3MyBaIE0yMDMuMDE0NiwxMjcuMDc1NTk4IEwxMzkuOTM1NzI1LDkwLjQ0NTg1NDUgTDE2MS43Mjk0LDc3Ljg2MDc3NDggQzE2MS45NjkzNDgsNzcuNzMzNDQzNCAxNjIuMjU2ODM0LDc3LjczMzQ0MzQgMTYyLjQ5Njc4Myw3Ny44NjA3NzQ4IEwyMTQuNzI5OTc5LDEwOC4wNDQ1MDIgQzIzMS4wMzIzMjksMTE3LjQ1MTc0NyAyNDAuNDM3Mjk0LDEzNS40MjYxMDkgMjM4Ljg3MTUwNCwxNTQuMTgyNzM5IEMyMzcuMzA1NzE0LDE3Mi45MzkzNjggMjI1LjA1MDcxOSwxODkuMTA1NTcyIDIwNy40MTQyNjIsMTk1LjY3OTYzIEwyMDcuNDE0MjYyLDEzNC4yODg5OTggQzIwNy4zMjI1MjEsMTMxLjI3Njg2NyAyMDUuNjUwNjk3LDEyOC41MzU4NTMgMjAzLjAxNDYsMTI3LjA3NTU5OCBaIE0yMjQuNzU3MTE2LDk0LjM4NTA4NjcgTDIyMy4yMjIzNSw5My40NjQyMjcyIEwxNzEuNjAzMDYsNjMuMzgyODE3MyBDMTY4Ljk4MTI5Myw2MS44NDQzNzUxIDE2NS43MzI0NTYsNjEuODQ0Mzc1MSAxNjMuMTEwNjg5LDYzLjM4MjgxNzMgTDk5Ljk4MDY1NTQsOTkuODA3OTI1OSBMOTkuOTgwNjU1NCw3NC41ODY2MDc3IEM5OS45NTMzMDA0LDc0LjMyNTQwODggMTAwLjA3MTA5NSw3NC4wNzAxODY5IDEwMC4yODc2MDksNzMuOTIxNTQyNiBMMTUyLjUyMDgwNSw0My43ODg5NzM4IEMxNjguODYzMDk4LDM0LjM3NDM1MTggMTg5LjE3NDI1NiwzNS4yNTI5MDQzIDIwNC42NDI1NzksNDYuMDQzNDg0MSBDMjIwLjExMDkwMyw1Ni44MzQwNjM4IDIyNy45NDkyNjksNzUuNTkyMzk1OSAyMjQuNzU3MTE2LDk0LjE4MDQ1MTMgTDIyNC43NTcxMTYsOTQuMzg1MDg2NyBaIE04OC4wNjA2NDA5LDEzOS4wOTc5MzEgTDY2LjIxNTgwNzYsMTI2LjUxMjg1MSBDNjUuOTk1MDM5OSwxMjYuMzc5MDkxIDY1Ljg0NTA5NjUsMTI2LjE1NDE3NiA2NS44MDY1MzY3LDEyNS44OTg5NDUgTDY1LjgwNjUzNjcsNjUuNjg0OTY2IEM2NS44MzE0NDk1LDQ2LjgyODUzNjcgNzYuNzUwMDYwNSwyOS42ODQ2MDMyIDkzLjgyNzA4NTIsMjEuNjg4MzA1NSBDMTEwLjkwNDExLDEzLjY5MjAwNzkgMTMxLjA2MzgzMywxNi4yODM1NDYyIDE0NS41NjMyLDI4LjMzODk5OCBMMTQ0LjAyODQzNCwyOS4yMDg2OTg2IEw5Mi4zNTc5ODUyLDU5LjAzNDMxNDIgQzg5Ljc0MTkzMjcsNjAuNTY4NzUxMyA4OC4xMjgyNTk3LDYzLjM2ODM3NjcgODguMTExNzk5OCw2Ni40MDExOTAxIEw4OC4wNjA2NDA5LDEzOS4wOTc5MzEgWiBNOTkuOTI5NDk2NSwxMTMuNTE4NSBMMTI4LjA2Njg3LDk3LjMwMTE0MTcgTDE1Ni4yNTU0MDIsMTEzLjUxODUgTDE1Ni4yNTU0MDIsMTQ1Ljk1MzIxOCBMMTI4LjE2OTE4NywxNjIuMTcwNTc3IEw5OS45ODA2NTU0LDE0NS45NTMyMTggTDk5LjkyOTQ5NjUsMTEzLjUxODUgWiIgZmlsbD0iIzAwMDAwMCI+PC9wYXRoPgogICAgPC9nPgo8L3N2Zz4K">
        <bpmn:documentation>Use general knowledge of D&amp;D rule clarifications and explain lore.</bpmn:documentation>
        <bpmn:extensionElements>
          <zeebe:taskDefinition type="io.camunda:http-json:1" />
          <zeebe:ioMapping>
            <zeebe:input source="bearer" target="authentication.type" />
            <zeebe:input source="{{secrets.AI_API_KEY}}" target="authentication.token" />
            <zeebe:input source="{{secrets.AI_API_ORG}}" target="internal_organization" />
            <zeebe:input source="=if is defined(internal_organization) and internal_organization != null then {&#34;Content-Type&#34;:&#34;application/json&#34;, &#34;OpenAI-Organization&#34;:internal_organization} else {&#34;Content-Type&#34;:&#34;application/json&#34;}" target="headers" />
            <zeebe:input source="chat" target="operation" />
            <zeebe:input source="post" target="method" />
            <zeebe:input source="https://api.openai.com/v1/chat/completions" target="url" />
            <zeebe:input source="custom" target="internal_model" />
            <zeebe:input source="{{secrets.AI_API_MODEL}}" target="internal_custom_model" />
            <zeebe:input source="1" target="internal_temperature" />
            <zeebe:input source="=&#34;Use existing knowledge of D&#38;D 5th Edition to answer D&#38;D rule clarifications and explain lore.&#10;&#10;Try to keep the answers fairly short â€“ no more than 5 sentences is prefered.&#10;&#10;The player&#39;s request for reference is `&#34; + prompt + &#34;`.&#34;" target="internal_prompt" />
            <zeebe:input source="1" target="internal_choices" />
            <zeebe:input source="=append(concatenate(if is defined(internal_systemMessage) then [{&#34;role&#34;: &#34;system&#34;, &#34;content&#34;: internal_systemMessage}] else [], if is defined(internal_chatHistory) then internal_chatHistory else []), {&#34;role&#34;: &#34;user&#34;, &#34;content&#34;: internal_prompt})" target="internal_messages" />
            <zeebe:input source="={&#34;model&#34;: if is defined(internal_custom_model) then internal_custom_model else internal_model, &#34;messages&#34;: internal_messages, &#34;n&#34;: number(internal_choices), &#34;temperature&#34;: number(internal_temperature)}" target="body" />
            <zeebe:input source="30" target="connectionTimeoutInSeconds" />
          </zeebe:ioMapping>
          <zeebe:taskHeaders>
            <zeebe:header key="resultVariable" value="toolCallResult" />
            <zeebe:header key="resultExpression" value="={openAiResponse: response.body}" />
            <zeebe:header key="elementTemplateVersion" value="6" />
            <zeebe:header key="elementTemplateId" value="io.camunda.connectors.OpenAI.v1" />
          </zeebe:taskHeaders>
        </bpmn:extensionElements>
      </bpmn:serviceTask>
      <bpmn:serviceTask id="Activity_0p65jq1" name="Roll Dice" zeebe:modelerTemplate="io.camunda.connectors.OpenAI.v1" zeebe:modelerTemplateVersion="6" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjU2cHgiIGhlaWdodD0iMjYwcHgiIHZpZXdCb3g9IjAgMCAyNTYgMjYwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KICAgIDx0aXRsZT5PcGVuQUk8L3RpdGxlPgogICAgPGc+CiAgICAgICAgPHBhdGggZD0iTTIzOS4xODM5MTQsMTA2LjIwMjc4MyBDMjQ1LjA1NDMwNCw4OC41MjQyMDk2IDI0My4wMjIyOCw2OS4xNzMzODA1IDIzMy42MDc1OTksNTMuMDk5ODg2NCBDMjE5LjQ1MTY3OCwyOC40NTg4MDIxIDE5MC45OTk3MDMsMTUuNzgzNjEyOSAxNjMuMjEzMDA3LDIxLjczOTUwNSBDMTQ3LjU1NDA3Nyw0LjMyMTQ1ODgzIDEyMy43OTQ5MDksLTMuNDIzOTg1NTQgMTAwLjg3OTAxLDEuNDE4NzM4OTggQzc3Ljk2MzExMDUsNi4yNjE0NjM0OSA1OS4zNjkwMDkzLDIyLjk1NzI1MzYgNTIuMDk1OTYyMSw0NS4yMjE0MjE5IEMzMy44NDM2NDk0LDQ4Ljk2NDQ4NjcgMTguMDkwMTcyMSw2MC4zOTI3NDkgOC44NjY3MjUxMyw3Ni41ODE4MDMzIEMtNS40NDM0OTEsMTAxLjE4Mjk2MiAtMi4xOTU0NDQzMSwxMzIuMjE1MjU1IDE2Ljg5ODY2NjIsMTUzLjMyMDA5NCBDMTEuMDA2MDg2NSwxNzAuOTkwNjU2IDEzLjAxOTcyODMsMTkwLjM0Mzk5MSAyMi40MjM4MjMxLDIwNi40MjI5OTEgQzM2LjU5NzU1NTMsMjMxLjA3MjM0NCA2NS4wNjgwMzQyLDI0My43NDY1NjYgOTIuODY5NTczOCwyMzcuNzgzMzcyIEMxMDUuMjM1NjM5LDI1MS43MDgyNDkgMTIzLjAwMTExMywyNTkuNjMwOTQyIDE0MS42MjM5NjgsMjU5LjUyNjkyIEMxNzAuMTA1MzU5LDI1OS41NTIxNjkgMTk1LjMzNzYxMSwyNDEuMTY1NzE4IDIwNC4wMzc3NzcsMjE0LjA0NTY2MSBDMjIyLjI4NzM0LDIxMC4yOTYzNTYgMjM4LjAzODQ4OSwxOTguODY5NzgzIDI0Ny4yNjcwMTQsMTgyLjY4NTI4IEMyNjEuNDA0NDUzLDE1OC4xMjc1MTUgMjU4LjE0MjQ5NCwxMjcuMjYyNzc1IDIzOS4xODM5MTQsMTA2LjIwMjc4MyBMMjM5LjE4MzkxNCwxMDYuMjAyNzgzIFogTTE0MS42MjM5NjgsMjQyLjU0MTIwNyBDMTMwLjI1NTY4MiwyNDIuNTU5MTc3IDExOS4yNDM4NzYsMjM4LjU3NDY0MiAxMTAuNTE5MzgxLDIzMS4yODYxOTcgTDExMi4wNTQxNDYsMjMwLjQxNjQ5NiBMMTYzLjcyNDU5NSwyMDAuNTkwODgxIEMxNjYuMzQwNjQ4LDE5OS4wNTY0NDQgMTY3Ljk1NDMyMSwxOTYuMjU2ODE4IDE2Ny45NzA3ODEsMTkzLjIyNDAwNSBMMTY3Ljk3MDc4MSwxMjAuMzczNzg4IEwxODkuODE1NjE0LDEzMy4wMTAwMjYgQzE5MC4wMzQxMzIsMTMzLjEyMTQyMyAxOTAuMTg2MjM1LDEzMy4zMzA1NjQgMTkwLjIyNDg4NSwxMzMuNTcyNzc0IEwxOTAuMjI0ODg1LDE5My45NDAyMjkgQzE5MC4xNjg2MDMsMjIwLjc1ODQyNyAxNjguNDQyMTY2LDI0Mi40ODQ4NjQgMTQxLjYyMzk2OCwyNDIuNTQxMjA3IFogTTM3LjE1NzU3NDksMTk3LjkzMDYyIEMzMS40NTY0OTgsMTg4LjA4NjM1OSAyOS40MDk0ODE4LDE3Ni41NDY5ODQgMzEuMzc2NjIzNywxNjUuMzQyNDI2IEwzMi45MTEzODk1LDE2Ni4yNjMyODUgTDg0LjYzMjk5NzMsMTk2LjA4ODkwMSBDODcuMjM4OTM0OSwxOTcuNjE4MjA3IDkwLjQ2ODI3MTcsMTk3LjYxODIwNyA5My4wNzQyMDkzLDE5Ni4wODg5MDEgTDE1Ni4yNTU0MDIsMTU5LjY2Mzc5MyBMMTU2LjI1NTQwMiwxODQuODg1MTExIEMxNTYuMjQzNTU3LDE4NS4xNDk3NzEgMTU2LjExMTcyNSwxODUuMzk0NjAyIDE1NS44OTcyOSwxODUuNTUwMTc2IEwxMDMuNTYxNzc2LDIxNS43MzM5MDMgQzgwLjMwNTQ5NTMsMjI5LjEzMTYzMiA1MC41OTI0OTU0LDIyMS4xNjU0MzUgMzcuMTU3NTc0OSwxOTcuOTMwNjIgWiBNMjMuNTQ5MzE4MSw4NS4zODExMjczIEMyOS4yODk5ODYxLDc1LjQ3MzMwOTcgMzguMzUxMTkxMSw2Ny45MTYyNjQ4IDQ5LjEyODc0ODIsNjQuMDQ3ODgyNSBMNDkuMTI4NzQ4MiwxMjUuNDM4NTE1IEM0OS4wODkxNDkyLDEyOC40NTk0MjUgNTAuNjk2NTM4NiwxMzEuMjYyNTU2IDUzLjMyMzc3NDgsMTMyLjc1NDIzMiBMMTE2LjE5ODAxNCwxNjkuMDI1ODY0IEw5NC4zNTMxODA4LDE4MS42NjIxMDIgQzk0LjExMzIzMjUsMTgxLjc4OTQzNCA5My44MjU3NDYxLDE4MS43ODk0MzQgOTMuNTg1Nzk3OSwxODEuNjYyMTAyIEw0MS4zNTI2MDE1LDE1MS41Mjk1MzQgQzE4LjE0MTk0MjYsMTM4LjA3NjA5OCAxMC4xODE3NjgxLDEwOC4zODU1NjIgMjMuNTQ5MzE4MSw4NS4xMjUzMzMgTDIzLjU0OTMxODEsODUuMzgxMTI3MyBaIE0yMDMuMDE0NiwxMjcuMDc1NTk4IEwxMzkuOTM1NzI1LDkwLjQ0NTg1NDUgTDE2MS43Mjk0LDc3Ljg2MDc3NDggQzE2MS45NjkzNDgsNzcuNzMzNDQzNCAxNjIuMjU2ODM0LDc3LjczMzQ0MzQgMTYyLjQ5Njc4Myw3Ny44NjA3NzQ4IEwyMTQuNzI5OTc5LDEwOC4wNDQ1MDIgQzIzMS4wMzIzMjksMTE3LjQ1MTc0NyAyNDAuNDM3Mjk0LDEzNS40MjYxMDkgMjM4Ljg3MTUwNCwxNTQuMTgyNzM5IEMyMzcuMzA1NzE0LDE3Mi45MzkzNjggMjI1LjA1MDcxOSwxODkuMTA1NTcyIDIwNy40MTQyNjIsMTk1LjY3OTYzIEwyMDcuNDE0MjYyLDEzNC4yODg5OTggQzIwNy4zMjI1MjEsMTMxLjI3Njg2NyAyMDUuNjUwNjk3LDEyOC41MzU4NTMgMjAzLjAxNDYsMTI3LjA3NTU5OCBaIE0yMjQuNzU3MTE2LDk0LjM4NTA4NjcgTDIyMy4yMjIzNSw5My40NjQyMjcyIEwxNzEuNjAzMDYsNjMuMzgyODE3MyBDMTY4Ljk4MTI5Myw2MS44NDQzNzUxIDE2NS43MzI0NTYsNjEuODQ0Mzc1MSAxNjMuMTEwNjg5LDYzLjM4MjgxNzMgTDk5Ljk4MDY1NTQsOTkuODA3OTI1OSBMOTkuOTgwNjU1NCw3NC41ODY2MDc3IEM5OS45NTMzMDA0LDc0LjMyNTQwODggMTAwLjA3MTA5NSw3NC4wNzAxODY5IDEwMC4yODc2MDksNzMuOTIxNTQyNiBMMTUyLjUyMDgwNSw0My43ODg5NzM4IEMxNjguODYzMDk4LDM0LjM3NDM1MTggMTg5LjE3NDI1NiwzNS4yNTI5MDQzIDIwNC42NDI1NzksNDYuMDQzNDg0MSBDMjIwLjExMDkwMyw1Ni44MzQwNjM4IDIyNy45NDkyNjksNzUuNTkyMzk1OSAyMjQuNzU3MTE2LDk0LjE4MDQ1MTMgTDIyNC43NTcxMTYsOTQuMzg1MDg2NyBaIE04OC4wNjA2NDA5LDEzOS4wOTc5MzEgTDY2LjIxNTgwNzYsMTI2LjUxMjg1MSBDNjUuOTk1MDM5OSwxMjYuMzc5MDkxIDY1Ljg0NTA5NjUsMTI2LjE1NDE3NiA2NS44MDY1MzY3LDEyNS44OTg5NDUgTDY1LjgwNjUzNjcsNjUuNjg0OTY2IEM2NS44MzE0NDk1LDQ2LjgyODUzNjcgNzYuNzUwMDYwNSwyOS42ODQ2MDMyIDkzLjgyNzA4NTIsMjEuNjg4MzA1NSBDMTEwLjkwNDExLDEzLjY5MjAwNzkgMTMxLjA2MzgzMywxNi4yODM1NDYyIDE0NS41NjMyLDI4LjMzODk5OCBMMTQ0LjAyODQzNCwyOS4yMDg2OTg2IEw5Mi4zNTc5ODUyLDU5LjAzNDMxNDIgQzg5Ljc0MTkzMjcsNjAuNTY4NzUxMyA4OC4xMjgyNTk3LDYzLjM2ODM3NjcgODguMTExNzk5OCw2Ni40MDExOTAxIEw4OC4wNjA2NDA5LDEzOS4wOTc5MzEgWiBNOTkuOTI5NDk2NSwxMTMuNTE4NSBMMTI4LjA2Njg3LDk3LjMwMTE0MTcgTDE1Ni4yNTU0MDIsMTEzLjUxODUgTDE1Ni4yNTU0MDIsMTQ1Ljk1MzIxOCBMMTI4LjE2OTE4NywxNjIuMTcwNTc3IEw5OS45ODA2NTU0LDE0NS45NTMyMTggTDk5LjkyOTQ5NjUsMTEzLjUxODUgWiIgZmlsbD0iIzAwMDAwMCI+PC9wYXRoPgogICAgPC9nPgo8L3N2Zz4K">
        <bpmn:documentation>Use pattern recognition and logic to roll dice and report the result.</bpmn:documentation>
        <bpmn:extensionElements>
          <zeebe:taskDefinition type="io.camunda:http-json:1" />
          <zeebe:ioMapping>
            <zeebe:input source="bearer" target="authentication.type" />
            <zeebe:input source="{{secrets.AI_API_KEY}}" target="authentication.token" />
            <zeebe:input source="{{secrets.AI_API_ORG}}" target="internal_organization" />
            <zeebe:input source="=if is defined(internal_organization) and internal_organization != null then {&#34;Content-Type&#34;:&#34;application/json&#34;, &#34;OpenAI-Organization&#34;:internal_organization} else {&#34;Content-Type&#34;:&#34;application/json&#34;}" target="headers" />
            <zeebe:input source="chat" target="operation" />
            <zeebe:input source="post" target="method" />
            <zeebe:input source="https://api.openai.com/v1/chat/completions" target="url" />
            <zeebe:input source="custom" target="internal_model" />
            <zeebe:input source="{{secrets.AI_API_MODEL}}" target="internal_custom_model" />
            <zeebe:input source="1" target="internal_temperature" />
            <zeebe:input source="=&#34;Use pattern recognition and logic to roll dice and report the result.&#10;&#10;Example prompt:&#10;Are you able to assist with rolling dice? 2d20+1d6&#10;&#10;Example response:&#10;You rolled **2d20 + 1d6**:&#10;ðŸŽ² 2d20 â†’ 18, 5&#10;ðŸŽ² 1d6 â†’ 5&#10;**Total: 28**&#10;&#10;The player&#39;s request for reference is `&#34; + prompt + &#34;`.&#34;" target="internal_prompt" />
            <zeebe:input source="1" target="internal_choices" />
            <zeebe:input source="=append(concatenate(if is defined(internal_systemMessage) then [{&#34;role&#34;: &#34;system&#34;, &#34;content&#34;: internal_systemMessage}] else [], if is defined(internal_chatHistory) then internal_chatHistory else []), {&#34;role&#34;: &#34;user&#34;, &#34;content&#34;: internal_prompt})" target="internal_messages" />
            <zeebe:input source="={&#34;model&#34;: if is defined(internal_custom_model) then internal_custom_model else internal_model, &#34;messages&#34;: internal_messages, &#34;n&#34;: number(internal_choices), &#34;temperature&#34;: number(internal_temperature)}" target="body" />
            <zeebe:input source="30" target="connectionTimeoutInSeconds" />
          </zeebe:ioMapping>
          <zeebe:taskHeaders>
            <zeebe:header key="resultVariable" value="toolCallResult" />
            <zeebe:header key="resultExpression" value="={openAiResponse: response.body}" />
            <zeebe:header key="elementTemplateVersion" value="6" />
            <zeebe:header key="elementTemplateId" value="io.camunda.connectors.OpenAI.v1" />
          </zeebe:taskHeaders>
        </bpmn:extensionElements>
      </bpmn:serviceTask>
      <bpmn:serviceTask id="AICreateQuest" name="Create Quest AI Task" zeebe:modelerTemplate="io.camunda.connectors.OpenAI.v1" zeebe:modelerTemplateVersion="6" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjU2cHgiIGhlaWdodD0iMjYwcHgiIHZpZXdCb3g9IjAgMCAyNTYgMjYwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KICAgIDx0aXRsZT5PcGVuQUk8L3RpdGxlPgogICAgPGc+CiAgICAgICAgPHBhdGggZD0iTTIzOS4xODM5MTQsMTA2LjIwMjc4MyBDMjQ1LjA1NDMwNCw4OC41MjQyMDk2IDI0My4wMjIyOCw2OS4xNzMzODA1IDIzMy42MDc1OTksNTMuMDk5ODg2NCBDMjE5LjQ1MTY3OCwyOC40NTg4MDIxIDE5MC45OTk3MDMsMTUuNzgzNjEyOSAxNjMuMjEzMDA3LDIxLjczOTUwNSBDMTQ3LjU1NDA3Nyw0LjMyMTQ1ODgzIDEyMy43OTQ5MDksLTMuNDIzOTg1NTQgMTAwLjg3OTAxLDEuNDE4NzM4OTggQzc3Ljk2MzExMDUsNi4yNjE0NjM0OSA1OS4zNjkwMDkzLDIyLjk1NzI1MzYgNTIuMDk1OTYyMSw0NS4yMjE0MjE5IEMzMy44NDM2NDk0LDQ4Ljk2NDQ4NjcgMTguMDkwMTcyMSw2MC4zOTI3NDkgOC44NjY3MjUxMyw3Ni41ODE4MDMzIEMtNS40NDM0OTEsMTAxLjE4Mjk2MiAtMi4xOTU0NDQzMSwxMzIuMjE1MjU1IDE2Ljg5ODY2NjIsMTUzLjMyMDA5NCBDMTEuMDA2MDg2NSwxNzAuOTkwNjU2IDEzLjAxOTcyODMsMTkwLjM0Mzk5MSAyMi40MjM4MjMxLDIwNi40MjI5OTEgQzM2LjU5NzU1NTMsMjMxLjA3MjM0NCA2NS4wNjgwMzQyLDI0My43NDY1NjYgOTIuODY5NTczOCwyMzcuNzgzMzcyIEMxMDUuMjM1NjM5LDI1MS43MDgyNDkgMTIzLjAwMTExMywyNTkuNjMwOTQyIDE0MS42MjM5NjgsMjU5LjUyNjkyIEMxNzAuMTA1MzU5LDI1OS41NTIxNjkgMTk1LjMzNzYxMSwyNDEuMTY1NzE4IDIwNC4wMzc3NzcsMjE0LjA0NTY2MSBDMjIyLjI4NzM0LDIxMC4yOTYzNTYgMjM4LjAzODQ4OSwxOTguODY5NzgzIDI0Ny4yNjcwMTQsMTgyLjY4NTI4IEMyNjEuNDA0NDUzLDE1OC4xMjc1MTUgMjU4LjE0MjQ5NCwxMjcuMjYyNzc1IDIzOS4xODM5MTQsMTA2LjIwMjc4MyBMMjM5LjE4MzkxNCwxMDYuMjAyNzgzIFogTTE0MS42MjM5NjgsMjQyLjU0MTIwNyBDMTMwLjI1NTY4MiwyNDIuNTU5MTc3IDExOS4yNDM4NzYsMjM4LjU3NDY0MiAxMTAuNTE5MzgxLDIzMS4yODYxOTcgTDExMi4wNTQxNDYsMjMwLjQxNjQ5NiBMMTYzLjcyNDU5NSwyMDAuNTkwODgxIEMxNjYuMzQwNjQ4LDE5OS4wNTY0NDQgMTY3Ljk1NDMyMSwxOTYuMjU2ODE4IDE2Ny45NzA3ODEsMTkzLjIyNDAwNSBMMTY3Ljk3MDc4MSwxMjAuMzczNzg4IEwxODkuODE1NjE0LDEzMy4wMTAwMjYgQzE5MC4wMzQxMzIsMTMzLjEyMTQyMyAxOTAuMTg2MjM1LDEzMy4zMzA1NjQgMTkwLjIyNDg4NSwxMzMuNTcyNzc0IEwxOTAuMjI0ODg1LDE5My45NDAyMjkgQzE5MC4xNjg2MDMsMjIwLjc1ODQyNyAxNjguNDQyMTY2LDI0Mi40ODQ4NjQgMTQxLjYyMzk2OCwyNDIuNTQxMjA3IFogTTM3LjE1NzU3NDksMTk3LjkzMDYyIEMzMS40NTY0OTgsMTg4LjA4NjM1OSAyOS40MDk0ODE4LDE3Ni41NDY5ODQgMzEuMzc2NjIzNywxNjUuMzQyNDI2IEwzMi45MTEzODk1LDE2Ni4yNjMyODUgTDg0LjYzMjk5NzMsMTk2LjA4ODkwMSBDODcuMjM4OTM0OSwxOTcuNjE4MjA3IDkwLjQ2ODI3MTcsMTk3LjYxODIwNyA5My4wNzQyMDkzLDE5Ni4wODg5MDEgTDE1Ni4yNTU0MDIsMTU5LjY2Mzc5MyBMMTU2LjI1NTQwMiwxODQuODg1MTExIEMxNTYuMjQzNTU3LDE4NS4xNDk3NzEgMTU2LjExMTcyNSwxODUuMzk0NjAyIDE1NS44OTcyOSwxODUuNTUwMTc2IEwxMDMuNTYxNzc2LDIxNS43MzM5MDMgQzgwLjMwNTQ5NTMsMjI5LjEzMTYzMiA1MC41OTI0OTU0LDIyMS4xNjU0MzUgMzcuMTU3NTc0OSwxOTcuOTMwNjIgWiBNMjMuNTQ5MzE4MSw4NS4zODExMjczIEMyOS4yODk5ODYxLDc1LjQ3MzMwOTcgMzguMzUxMTkxMSw2Ny45MTYyNjQ4IDQ5LjEyODc0ODIsNjQuMDQ3ODgyNSBMNDkuMTI4NzQ4MiwxMjUuNDM4NTE1IEM0OS4wODkxNDkyLDEyOC40NTk0MjUgNTAuNjk2NTM4NiwxMzEuMjYyNTU2IDUzLjMyMzc3NDgsMTMyLjc1NDIzMiBMMTE2LjE5ODAxNCwxNjkuMDI1ODY0IEw5NC4zNTMxODA4LDE4MS42NjIxMDIgQzk0LjExMzIzMjUsMTgxLjc4OTQzNCA5My44MjU3NDYxLDE4MS43ODk0MzQgOTMuNTg1Nzk3OSwxODEuNjYyMTAyIEw0MS4zNTI2MDE1LDE1MS41Mjk1MzQgQzE4LjE0MTk0MjYsMTM4LjA3NjA5OCAxMC4xODE3NjgxLDEwOC4zODU1NjIgMjMuNTQ5MzE4MSw4NS4xMjUzMzMgTDIzLjU0OTMxODEsODUuMzgxMTI3MyBaIE0yMDMuMDE0NiwxMjcuMDc1NTk4IEwxMzkuOTM1NzI1LDkwLjQ0NTg1NDUgTDE2MS43Mjk0LDc3Ljg2MDc3NDggQzE2MS45NjkzNDgsNzcuNzMzNDQzNCAxNjIuMjU2ODM0LDc3LjczMzQ0MzQgMTYyLjQ5Njc4Myw3Ny44NjA3NzQ4IEwyMTQuNzI5OTc5LDEwOC4wNDQ1MDIgQzIzMS4wMzIzMjksMTE3LjQ1MTc0NyAyNDAuNDM3Mjk0LDEzNS40MjYxMDkgMjM4Ljg3MTUwNCwxNTQuMTgyNzM5IEMyMzcuMzA1NzE0LDE3Mi45MzkzNjggMjI1LjA1MDcxOSwxODkuMTA1NTcyIDIwNy40MTQyNjIsMTk1LjY3OTYzIEwyMDcuNDE0MjYyLDEzNC4yODg5OTggQzIwNy4zMjI1MjEsMTMxLjI3Njg2NyAyMDUuNjUwNjk3LDEyOC41MzU4NTMgMjAzLjAxNDYsMTI3LjA3NTU5OCBaIE0yMjQuNzU3MTE2LDk0LjM4NTA4NjcgTDIyMy4yMjIzNSw5My40NjQyMjcyIEwxNzEuNjAzMDYsNjMuMzgyODE3MyBDMTY4Ljk4MTI5Myw2MS44NDQzNzUxIDE2NS43MzI0NTYsNjEuODQ0Mzc1MSAxNjMuMTEwNjg5LDYzLjM4MjgxNzMgTDk5Ljk4MDY1NTQsOTkuODA3OTI1OSBMOTkuOTgwNjU1NCw3NC41ODY2MDc3IEM5OS45NTMzMDA0LDc0LjMyNTQwODggMTAwLjA3MTA5NSw3NC4wNzAxODY5IDEwMC4yODc2MDksNzMuOTIxNTQyNiBMMTUyLjUyMDgwNSw0My43ODg5NzM4IEMxNjguODYzMDk4LDM0LjM3NDM1MTggMTg5LjE3NDI1NiwzNS4yNTI5MDQzIDIwNC42NDI1NzksNDYuMDQzNDg0MSBDMjIwLjExMDkwMyw1Ni44MzQwNjM4IDIyNy45NDkyNjksNzUuNTkyMzk1OSAyMjQuNzU3MTE2LDk0LjE4MDQ1MTMgTDIyNC43NTcxMTYsOTQuMzg1MDg2NyBaIE04OC4wNjA2NDA5LDEzOS4wOTc5MzEgTDY2LjIxNTgwNzYsMTI2LjUxMjg1MSBDNjUuOTk1MDM5OSwxMjYuMzc5MDkxIDY1Ljg0NTA5NjUsMTI2LjE1NDE3NiA2NS44MDY1MzY3LDEyNS44OTg5NDUgTDY1LjgwNjUzNjcsNjUuNjg0OTY2IEM2NS44MzE0NDk1LDQ2LjgyODUzNjcgNzYuNzUwMDYwNSwyOS42ODQ2MDMyIDkzLjgyNzA4NTIsMjEuNjg4MzA1NSBDMTEwLjkwNDExLDEzLjY5MjAwNzkgMTMxLjA2MzgzMywxNi4yODM1NDYyIDE0NS41NjMyLDI4LjMzODk5OCBMMTQ0LjAyODQzNCwyOS4yMDg2OTg2IEw5Mi4zNTc5ODUyLDU5LjAzNDMxNDIgQzg5Ljc0MTkzMjcsNjAuNTY4NzUxMyA4OC4xMjgyNTk3LDYzLjM2ODM3NjcgODguMTExNzk5OCw2Ni40MDExOTAxIEw4OC4wNjA2NDA5LDEzOS4wOTc5MzEgWiBNOTkuOTI5NDk2NSwxMTMuNTE4NSBMMTI4LjA2Njg3LDk3LjMwMTE0MTcgTDE1Ni4yNTU0MDIsMTEzLjUxODUgTDE1Ni4yNTU0MDIsMTQ1Ljk1MzIxOCBMMTI4LjE2OTE4NywxNjIuMTcwNTc3IEw5OS45ODA2NTU0LDE0NS45NTMyMTggTDk5LjkyOTQ5NjUsMTEzLjUxODUgWiIgZmlsbD0iIzAwMDAwMCI+PC9wYXRoPgogICAgPC9nPgo8L3N2Zz4K">
        <bpmn:documentation>Use this tool to create a new quest for a character.</bpmn:documentation>
        <bpmn:extensionElements>
          <zeebe:taskDefinition type="io.camunda:http-json:1" />
          <zeebe:ioMapping>
            <zeebe:input source="bearer" target="authentication.type" />
            <zeebe:input source="{{secrets.AI_API_KEY}}" target="authentication.token" />
            <zeebe:input source="{{secrets.AI_API_ORG}}" target="internal_organization" />
            <zeebe:input source="=if is defined(internal_organization) and internal_organization != null then {&#34;Content-Type&#34;:&#34;application/json&#34;, &#34;OpenAI-Organization&#34;:internal_organization} else {&#34;Content-Type&#34;:&#34;application/json&#34;}" target="headers" />
            <zeebe:input source="chat" target="operation" />
            <zeebe:input source="post" target="method" />
            <zeebe:input source="https://api.openai.com/v1/chat/completions" target="url" />
            <zeebe:input source="custom" target="internal_model" />
            <zeebe:input source="{{secrets.AI_API_MODEL}}" target="internal_custom_model" />
            <zeebe:input source="1" target="internal_temperature" />
            <zeebe:input source="=&#34;Choose an appropriate and imaginative D&#38;D style quest for the given character.&#10;&#10;The character is &#10;----&#10;Name: &#34; + name + &#34;&#10;Description: &#34; + description + &#34;&#10;Class: &#34; + class + &#34;&#10;Race: &#34; + race + &#34;&#10;Sex: &#34; + sex + &#34;&#10;----&#10;&#10;The player&#39;s request for reference is &#10;----&#10;&#34; + prompt + &#34;&#10;----&#10;&#10;Respond in JSON ONLY with nothing before or after the JSON response. Response should start and end with the JSON object brackets. The entire response should be encapsulated in the fields provided below. No single field can have a value containing more than 280 characters. Return results in json, not markdown. Do not prepend the response with the type \&#34;json\&#34;. The entire response must be in this format, exactly, with only the values differing based on your thinking. &#10;&#10;For the r_characterToQuest_c_characterId element, set the value exactly to the characterID variable, &#34; + characterId + &#34;, as in the example.&#10;&#10;Example: &#10;{&#10;\&#34;title\&#34;: \&#34;A Debt to the Shadow Guild\&#34;,&#10;\&#34;tier\&#34;: \&#34;Personal\&#34;,&#10;\&#34;levelrange\&#34;: \&#34;5-8\&#34;,&#10;\&#34;summary\&#34;: \&#34;A dark secret from your past has resurfaced, requiring you to infiltrate a noble&#39;s estate and retrieve an incriminating journal\&#34;,&#10;\&#34;objectives\&#34;: \&#34;1. Locate the estate of Giles Harbinger. 2. Get past the guards and dogs undetected. 3. Retrieve the journal and slip out.\&#34;,&#10;\&#34;rewards\&#34;: \&#34;Tangible: 500 gold pieces, a magical weapon, and a new contact. Intangible: Freeing yourself from being hunted.\&#34;,&#10;\&#34;r_characterToQuest_c_characterId\&#34;: &#34; + characterId + &#34;&#10;}&#34;" target="internal_prompt" />
            <zeebe:input source="1" target="internal_choices" />
            <zeebe:input source="=append(concatenate(if is defined(internal_systemMessage) then [{&#34;role&#34;: &#34;system&#34;, &#34;content&#34;: internal_systemMessage}] else [], if is defined(internal_chatHistory) then internal_chatHistory else []), {&#34;role&#34;: &#34;user&#34;, &#34;content&#34;: internal_prompt})" target="internal_messages" />
            <zeebe:input source="={&#34;model&#34;: if is defined(internal_custom_model) then internal_custom_model else internal_model, &#34;messages&#34;: internal_messages, &#34;n&#34;: number(internal_choices), &#34;temperature&#34;: number(internal_temperature)}" target="body" />
            <zeebe:input source="30" target="connectionTimeoutInSeconds" />
          </zeebe:ioMapping>
          <zeebe:taskHeaders>
            <zeebe:header key="resultVariable" value="toolCallResult" />
            <zeebe:header key="resultExpression" value="={ &#10;  questDetailOriginal:response.body.choices[1].message.content,&#10;  questDetail:&#10;   &#10;replace(replace(replace(replace(response.body.choices[1].message.content, &#34;\\n&#34;, &#34;&#34;), &#34;```json\\n&#34;, &#34;&#34;), &#34;\\n```&#34;, &#34;&#34;), &#34;.*?(\{[\\s\\S]*\}).*&#34;, &#34;$1&#34;)&#10;}" />
            <zeebe:header key="elementTemplateVersion" value="6" />
            <zeebe:header key="elementTemplateId" value="io.camunda.connectors.OpenAI.v1" />
          </zeebe:taskHeaders>
        </bpmn:extensionElements>
        <bpmn:outgoing>Flow_1ypb7rv</bpmn:outgoing>
      </bpmn:serviceTask>
      <bpmn:serviceTask id="CreateQuest" name="Create Quest" zeebe:modelerTemplate="cddb82b6-1f10-447e-a582-a18d246dd516" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgdmlld0JveD0iMCAwIDk2IDk2Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzBiNWZmZjt9PC9zdHlsZT48L2RlZnM+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNzEsMjFIMjVjLTIuMjA5MiwwLTQsMS43OTA4LTQsNHY0NmMwLDIuMjA5MSwxLjc5MDgsNCw0LDRoNDZjMi4yMDksMCw0LTEuNzkwOSw0LTRWMjVjMC0yLjIwOTItMS43OTEtNC00LTRaTTM3LDU2YzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0xMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMTBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0xMCwzMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMjBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0wLTEwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMTAsMzBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0wLTEwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0yMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTEwLDMwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0xMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMTBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2WiIvPjwvc3ZnPg==">
        <bpmn:extensionElements>
          <zeebe:taskDefinition type="io.camunda:http-json:1" retries="3" />
          <zeebe:ioMapping>
            <zeebe:input source="basic" target="authentication.type" />
            <zeebe:input source="{{secrets.ADMIN_USER}}" target="authentication.username" />
            <zeebe:input source="{{secrets.ADMIN_PASSWORD}}" target="authentication.password" />
            <zeebe:input source="other" target="type" />
            <zeebe:input source="{{secrets.BASE_URL}}" target="baseUrl" />
            <zeebe:input source="=&#34;/o/c/quests&#34;" target="path" />
            <zeebe:input source="POST" target="method" />
            <zeebe:input source="=baseUrl + path" target="url" />
            <zeebe:input source="=false" target="storeResponse" />
            <zeebe:input source="=20" target="connectionTimeoutInSeconds" />
            <zeebe:input source="=20" target="readTimeoutInSeconds" />
            <zeebe:input source="=questDetail" target="body" />
            <zeebe:input source="=false" target="ignoreNullValues" />
          </zeebe:ioMapping>
          <zeebe:taskHeaders>
            <zeebe:header key="resultVariable" value="newQuest" />
            <zeebe:header key="resultExpression" value="={&#10;  questId: body.id&#10;}" />
            <zeebe:header key="retryBackoff" value="PT0S" />
          </zeebe:taskHeaders>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1ypb7rv</bpmn:incoming>
        <bpmn:outgoing>Flow_1u8u6yk</bpmn:outgoing>
      </bpmn:serviceTask>
      <bpmn:serviceTask id="AIOpenChest" name="Open Chest AI Task" zeebe:modelerTemplate="io.camunda.connectors.OpenAI.v1" zeebe:modelerTemplateVersion="6" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjU2cHgiIGhlaWdodD0iMjYwcHgiIHZpZXdCb3g9IjAgMCAyNTYgMjYwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KICAgIDx0aXRsZT5PcGVuQUk8L3RpdGxlPgogICAgPGc+CiAgICAgICAgPHBhdGggZD0iTTIzOS4xODM5MTQsMTA2LjIwMjc4MyBDMjQ1LjA1NDMwNCw4OC41MjQyMDk2IDI0My4wMjIyOCw2OS4xNzMzODA1IDIzMy42MDc1OTksNTMuMDk5ODg2NCBDMjE5LjQ1MTY3OCwyOC40NTg4MDIxIDE5MC45OTk3MDMsMTUuNzgzNjEyOSAxNjMuMjEzMDA3LDIxLjczOTUwNSBDMTQ3LjU1NDA3Nyw0LjMyMTQ1ODgzIDEyMy43OTQ5MDksLTMuNDIzOTg1NTQgMTAwLjg3OTAxLDEuNDE4NzM4OTggQzc3Ljk2MzExMDUsNi4yNjE0NjM0OSA1OS4zNjkwMDkzLDIyLjk1NzI1MzYgNTIuMDk1OTYyMSw0NS4yMjE0MjE5IEMzMy44NDM2NDk0LDQ4Ljk2NDQ4NjcgMTguMDkwMTcyMSw2MC4zOTI3NDkgOC44NjY3MjUxMyw3Ni41ODE4MDMzIEMtNS40NDM0OTEsMTAxLjE4Mjk2MiAtMi4xOTU0NDQzMSwxMzIuMjE1MjU1IDE2Ljg5ODY2NjIsMTUzLjMyMDA5NCBDMTEuMDA2MDg2NSwxNzAuOTkwNjU2IDEzLjAxOTcyODMsMTkwLjM0Mzk5MSAyMi40MjM4MjMxLDIwNi40MjI5OTEgQzM2LjU5NzU1NTMsMjMxLjA3MjM0NCA2NS4wNjgwMzQyLDI0My43NDY1NjYgOTIuODY5NTczOCwyMzcuNzgzMzcyIEMxMDUuMjM1NjM5LDI1MS43MDgyNDkgMTIzLjAwMTExMywyNTkuNjMwOTQyIDE0MS42MjM5NjgsMjU5LjUyNjkyIEMxNzAuMTA1MzU5LDI1OS41NTIxNjkgMTk1LjMzNzYxMSwyNDEuMTY1NzE4IDIwNC4wMzc3NzcsMjE0LjA0NTY2MSBDMjIyLjI4NzM0LDIxMC4yOTYzNTYgMjM4LjAzODQ4OSwxOTguODY5NzgzIDI0Ny4yNjcwMTQsMTgyLjY4NTI4IEMyNjEuNDA0NDUzLDE1OC4xMjc1MTUgMjU4LjE0MjQ5NCwxMjcuMjYyNzc1IDIzOS4xODM5MTQsMTA2LjIwMjc4MyBMMjM5LjE4MzkxNCwxMDYuMjAyNzgzIFogTTE0MS42MjM5NjgsMjQyLjU0MTIwNyBDMTMwLjI1NTY4MiwyNDIuNTU5MTc3IDExOS4yNDM4NzYsMjM4LjU3NDY0MiAxMTAuNTE5MzgxLDIzMS4yODYxOTcgTDExMi4wNTQxNDYsMjMwLjQxNjQ5NiBMMTYzLjcyNDU5NSwyMDAuNTkwODgxIEMxNjYuMzQwNjQ4LDE5OS4wNTY0NDQgMTY3Ljk1NDMyMSwxOTYuMjU2ODE4IDE2Ny45NzA3ODEsMTkzLjIyNDAwNSBMMTY3Ljk3MDc4MSwxMjAuMzczNzg4IEwxODkuODE1NjE0LDEzMy4wMTAwMjYgQzE5MC4wMzQxMzIsMTMzLjEyMTQyMyAxOTAuMTg2MjM1LDEzMy4zMzA1NjQgMTkwLjIyNDg4NSwxMzMuNTcyNzc0IEwxOTAuMjI0ODg1LDE5My45NDAyMjkgQzE5MC4xNjg2MDMsMjIwLjc1ODQyNyAxNjguNDQyMTY2LDI0Mi40ODQ4NjQgMTQxLjYyMzk2OCwyNDIuNTQxMjA3IFogTTM3LjE1NzU3NDksMTk3LjkzMDYyIEMzMS40NTY0OTgsMTg4LjA4NjM1OSAyOS40MDk0ODE4LDE3Ni41NDY5ODQgMzEuMzc2NjIzNywxNjUuMzQyNDI2IEwzMi45MTEzODk1LDE2Ni4yNjMyODUgTDg0LjYzMjk5NzMsMTk2LjA4ODkwMSBDODcuMjM4OTM0OSwxOTcuNjE4MjA3IDkwLjQ2ODI3MTcsMTk3LjYxODIwNyA5My4wNzQyMDkzLDE5Ni4wODg5MDEgTDE1Ni4yNTU0MDIsMTU5LjY2Mzc5MyBMMTU2LjI1NTQwMiwxODQuODg1MTExIEMxNTYuMjQzNTU3LDE4NS4xNDk3NzEgMTU2LjExMTcyNSwxODUuMzk0NjAyIDE1NS44OTcyOSwxODUuNTUwMTc2IEwxMDMuNTYxNzc2LDIxNS43MzM5MDMgQzgwLjMwNTQ5NTMsMjI5LjEzMTYzMiA1MC41OTI0OTU0LDIyMS4xNjU0MzUgMzcuMTU3NTc0OSwxOTcuOTMwNjIgWiBNMjMuNTQ5MzE4MSw4NS4zODExMjczIEMyOS4yODk5ODYxLDc1LjQ3MzMwOTcgMzguMzUxMTkxMSw2Ny45MTYyNjQ4IDQ5LjEyODc0ODIsNjQuMDQ3ODgyNSBMNDkuMTI4NzQ4MiwxMjUuNDM4NTE1IEM0OS4wODkxNDkyLDEyOC40NTk0MjUgNTAuNjk2NTM4NiwxMzEuMjYyNTU2IDUzLjMyMzc3NDgsMTMyLjc1NDIzMiBMMTE2LjE5ODAxNCwxNjkuMDI1ODY0IEw5NC4zNTMxODA4LDE4MS42NjIxMDIgQzk0LjExMzIzMjUsMTgxLjc4OTQzNCA5My44MjU3NDYxLDE4MS43ODk0MzQgOTMuNTg1Nzk3OSwxODEuNjYyMTAyIEw0MS4zNTI2MDE1LDE1MS41Mjk1MzQgQzE4LjE0MTk0MjYsMTM4LjA3NjA5OCAxMC4xODE3NjgxLDEwOC4zODU1NjIgMjMuNTQ5MzE4MSw4NS4xMjUzMzMgTDIzLjU0OTMxODEsODUuMzgxMTI3MyBaIE0yMDMuMDE0NiwxMjcuMDc1NTk4IEwxMzkuOTM1NzI1LDkwLjQ0NTg1NDUgTDE2MS43Mjk0LDc3Ljg2MDc3NDggQzE2MS45NjkzNDgsNzcuNzMzNDQzNCAxNjIuMjU2ODM0LDc3LjczMzQ0MzQgMTYyLjQ5Njc4Myw3Ny44NjA3NzQ4IEwyMTQuNzI5OTc5LDEwOC4wNDQ1MDIgQzIzMS4wMzIzMjksMTE3LjQ1MTc0NyAyNDAuNDM3Mjk0LDEzNS40MjYxMDkgMjM4Ljg3MTUwNCwxNTQuMTgyNzM5IEMyMzcuMzA1NzE0LDE3Mi45MzkzNjggMjI1LjA1MDcxOSwxODkuMTA1NTcyIDIwNy40MTQyNjIsMTk1LjY3OTYzIEwyMDcuNDE0MjYyLDEzNC4yODg5OTggQzIwNy4zMjI1MjEsMTMxLjI3Njg2NyAyMDUuNjUwNjk3LDEyOC41MzU4NTMgMjAzLjAxNDYsMTI3LjA3NTU5OCBaIE0yMjQuNzU3MTE2LDk0LjM4NTA4NjcgTDIyMy4yMjIzNSw5My40NjQyMjcyIEwxNzEuNjAzMDYsNjMuMzgyODE3MyBDMTY4Ljk4MTI5Myw2MS44NDQzNzUxIDE2NS43MzI0NTYsNjEuODQ0Mzc1MSAxNjMuMTEwNjg5LDYzLjM4MjgxNzMgTDk5Ljk4MDY1NTQsOTkuODA3OTI1OSBMOTkuOTgwNjU1NCw3NC41ODY2MDc3IEM5OS45NTMzMDA0LDc0LjMyNTQwODggMTAwLjA3MTA5NSw3NC4wNzAxODY5IDEwMC4yODc2MDksNzMuOTIxNTQyNiBMMTUyLjUyMDgwNSw0My43ODg5NzM4IEMxNjguODYzMDk4LDM0LjM3NDM1MTggMTg5LjE3NDI1NiwzNS4yNTI5MDQzIDIwNC42NDI1NzksNDYuMDQzNDg0MSBDMjIwLjExMDkwMyw1Ni44MzQwNjM4IDIyNy45NDkyNjksNzUuNTkyMzk1OSAyMjQuNzU3MTE2LDk0LjE4MDQ1MTMgTDIyNC43NTcxMTYsOTQuMzg1MDg2NyBaIE04OC4wNjA2NDA5LDEzOS4wOTc5MzEgTDY2LjIxNTgwNzYsMTI2LjUxMjg1MSBDNjUuOTk1MDM5OSwxMjYuMzc5MDkxIDY1Ljg0NTA5NjUsMTI2LjE1NDE3NiA2NS44MDY1MzY3LDEyNS44OTg5NDUgTDY1LjgwNjUzNjcsNjUuNjg0OTY2IEM2NS44MzE0NDk1LDQ2LjgyODUzNjcgNzYuNzUwMDYwNSwyOS42ODQ2MDMyIDkzLjgyNzA4NTIsMjEuNjg4MzA1NSBDMTEwLjkwNDExLDEzLjY5MjAwNzkgMTMxLjA2MzgzMywxNi4yODM1NDYyIDE0NS41NjMyLDI4LjMzODk5OCBMMTQ0LjAyODQzNCwyOS4yMDg2OTg2IEw5Mi4zNTc5ODUyLDU5LjAzNDMxNDIgQzg5Ljc0MTkzMjcsNjAuNTY4NzUxMyA4OC4xMjgyNTk3LDYzLjM2ODM3NjcgODguMTExNzk5OCw2Ni40MDExOTAxIEw4OC4wNjA2NDA5LDEzOS4wOTc5MzEgWiBNOTkuOTI5NDk2NSwxMTMuNTE4NSBMMTI4LjA2Njg3LDk3LjMwMTE0MTcgTDE1Ni4yNTU0MDIsMTEzLjUxODUgTDE1Ni4yNTU0MDIsMTQ1Ljk1MzIxOCBMMTI4LjE2OTE4NywxNjIuMTcwNTc3IEw5OS45ODA2NTU0LDE0NS45NTMyMTggTDk5LjkyOTQ5NjUsMTEzLjUxODUgWiIgZmlsbD0iIzAwMDAwMCI+PC9wYXRoPgogICAgPC9nPgo8L3N2Zz4K">
        <bpmn:documentation>Use this tool to open a chest for the character.</bpmn:documentation>
        <bpmn:extensionElements>
          <zeebe:taskDefinition type="io.camunda:http-json:1" />
          <zeebe:ioMapping>
            <zeebe:input source="bearer" target="authentication.type" />
            <zeebe:input source="{{secrets.AI_API_KEY}}" target="authentication.token" />
            <zeebe:input source="{{secrets.AI_API_ORG}}" target="internal_organization" />
            <zeebe:input source="=if is defined(internal_organization) and internal_organization != null then {&#34;Content-Type&#34;:&#34;application/json&#34;, &#34;OpenAI-Organization&#34;:internal_organization} else {&#34;Content-Type&#34;:&#34;application/json&#34;}" target="headers" />
            <zeebe:input source="chat" target="operation" />
            <zeebe:input source="post" target="method" />
            <zeebe:input source="https://api.openai.com/v1/chat/completions" target="url" />
            <zeebe:input source="custom" target="internal_model" />
            <zeebe:input source="{{secrets.AI_API_MODEL}}" target="internal_custom_model" />
            <zeebe:input source="1" target="internal_temperature" />
            <zeebe:input source="=&#34;After completing a quest, a character can open a chest. You can determine the loot they receive using Random Loot Tables found in the Dungeon Master&#39;s Guide (DMG). The loot should be appropriate for the character.&#10;&#10;The character is &#10;----&#10;Name: &#34; + name + &#34;&#10;Description: &#34; + description + &#34;&#10;Class: &#34; + class + &#34;&#10;Race: &#34; + race + &#34;&#10;Sex: &#34; + sex + &#34;&#10;----&#10;&#10;The player&#39;s request for reference is &#10;----&#10;&#34; + prompt + &#34;&#10;----&#10;&#10;Respond in JSON ONLY with nothing before or after the JSON response. Response should start and end with the JSON object brackets. The entire response should be encapsulated in the fields provided below. No single field can have a value containing more than 280 characters. Return results in json, not markdown. Do not prepend the response with the type \&#34;json\&#34;. The entire response must be in this format, exactly, with only the values differing based on your thinking. &#10;&#10;For the r_characterToInventoryItem_c_characterId element, set the value exactly to the characterID variable, &#34; + characterId + &#34;, as indicated in the example.&#10;&#10;Example: &#10;  {&#10;    \&#34;quantity\&#34;: 1,&#10;    \&#34;equipped\&#34;: true,&#10;    \&#34;equippable\&#34;: true,&#10;    \&#34;description\&#34;: \&#34;A standard suit of heavy armor made of interlocking metal rings. It offers solid protection but hinders stealthy movement.\&#34;,&#10;    \&#34;weight\&#34;: 55,&#10;    \&#34;message\&#34;: \&#34;Heavy and noisy, but reliable protection.\&#34;,&#10;    \&#34;type\&#34;: \&#34;Heavy Armor\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Chain Mail\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;50 gp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;,&#10;    \&#34;armorClass\&#34;: \&#34;16 (Disadvantage on Stealth)\&#34;,&#10;    \&#34;damage\&#34;: \&#34;\&#34;,&#10;    \&#34;charges\&#34;: 0&#10;  }&#10;&#34;" target="internal_prompt" />
            <zeebe:input source="1" target="internal_choices" />
            <zeebe:input source="=append(concatenate(if is defined(internal_systemMessage) then [{&#34;role&#34;: &#34;system&#34;, &#34;content&#34;: internal_systemMessage}] else [], if is defined(internal_chatHistory) then internal_chatHistory else []), {&#34;role&#34;: &#34;user&#34;, &#34;content&#34;: internal_prompt})" target="internal_messages" />
            <zeebe:input source="={&#34;model&#34;: if is defined(internal_custom_model) then internal_custom_model else internal_model, &#34;messages&#34;: internal_messages, &#34;n&#34;: number(internal_choices), &#34;temperature&#34;: number(internal_temperature)}" target="body" />
            <zeebe:input source="30" target="connectionTimeoutInSeconds" />
          </zeebe:ioMapping>
          <zeebe:taskHeaders>
            <zeebe:header key="resultVariable" value="toolCallResult" />
            <zeebe:header key="resultExpression" value="={ &#10;  chestItemDetailOriginal:response.body.choices[1].message.content,&#10;  chestItemDetail:&#10;   &#10;replace(replace(replace(replace(response.body.choices[1].message.content, &#34;\\n&#34;, &#34;&#34;), &#34;```json\\n&#34;, &#34;&#34;), &#34;\\n```&#34;, &#34;&#34;), &#34;.*?(\{[\\s\\S]*\}).*&#34;, &#34;$1&#34;)&#10;}" />
            <zeebe:header key="elementTemplateVersion" value="6" />
            <zeebe:header key="elementTemplateId" value="io.camunda.connectors.OpenAI.v1" />
          </zeebe:taskHeaders>
        </bpmn:extensionElements>
        <bpmn:outgoing>Flow_0su35oo</bpmn:outgoing>
      </bpmn:serviceTask>
      <bpmn:serviceTask id="OpenchestAddIntentory" name="Open Chest Add Inventory" zeebe:modelerTemplate="cddb82b6-1f10-447e-a582-a18d246dd516" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgdmlld0JveD0iMCAwIDk2IDk2Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzBiNWZmZjt9PC9zdHlsZT48L2RlZnM+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNzEsMjFIMjVjLTIuMjA5MiwwLTQsMS43OTA4LTQsNHY0NmMwLDIuMjA5MSwxLjc5MDgsNCw0LDRoNDZjMi4yMDksMCw0LTEuNzkwOSw0LTRWMjVjMC0yLjIwOTItMS43OTEtNC00LTRaTTM3LDU2YzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0xMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMTBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0xMCwzMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMjBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0wLTEwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMTAsMzBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0wLTEwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0yMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTEwLDMwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0xMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMTBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2WiIvPjwvc3ZnPg==">
        <bpmn:extensionElements>
          <zeebe:taskDefinition type="io.camunda:http-json:1" retries="3" />
          <zeebe:ioMapping>
            <zeebe:input source="basic" target="authentication.type" />
            <zeebe:input source="{{secrets.ADMIN_USER}}" target="authentication.username" />
            <zeebe:input source="{{secrets.ADMIN_PASSWORD}}" target="authentication.password" />
            <zeebe:input source="other" target="type" />
            <zeebe:input source="{{secrets.BASE_URL}}" target="baseUrl" />
            <zeebe:input source="=&#34;/o/c/inventoryitems&#34;" target="path" />
            <zeebe:input source="POST" target="method" />
            <zeebe:input source="=baseUrl + path" target="url" />
            <zeebe:input source="=false" target="storeResponse" />
            <zeebe:input source="=20" target="connectionTimeoutInSeconds" />
            <zeebe:input source="=20" target="readTimeoutInSeconds" />
            <zeebe:input source="=chestItemDetail" target="body" />
            <zeebe:input source="=false" target="ignoreNullValues" />
          </zeebe:ioMapping>
          <zeebe:taskHeaders>
            <zeebe:header key="resultVariable" value="newChestItem" />
            <zeebe:header key="resultExpression" value="={&#10;  chestItemId: body.id&#10;}" />
            <zeebe:header key="retryBackoff" value="PT0S" />
          </zeebe:taskHeaders>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_0su35oo</bpmn:incoming>
      </bpmn:serviceTask>
      <bpmn:sequenceFlow id="Flow_1ypb7rv" sourceRef="AICreateQuest" targetRef="CreateQuest" />
      <bpmn:serviceTask id="Activity_11t1fvq" name="Update Character (Reskin)" zeebe:modelerTemplate="cddb82b6-1f10-447e-a582-a18d246dd516" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgdmlld0JveD0iMCAwIDk2IDk2Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzBiNWZmZjt9PC9zdHlsZT48L2RlZnM+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNzEsMjFIMjVjLTIuMjA5MiwwLTQsMS43OTA4LTQsNHY0NmMwLDIuMjA5MSwxLjc5MDgsNCw0LDRoNDZjMi4yMDksMCw0LTEuNzkwOSw0LTRWMjVjMC0yLjIwOTItMS43OTEtNC00LTRaTTM3LDU2YzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0xMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMTBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0xMCwzMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMjBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0wLTEwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMTAsMzBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0wLTEwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0yMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTEwLDMwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0xMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMTBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2WiIvPjwvc3ZnPg==">
        <bpmn:extensionElements>
          <zeebe:taskDefinition type="io.camunda:http-json:1" retries="3" />
          <zeebe:ioMapping>
            <zeebe:input source="basic" target="authentication.type" />
            <zeebe:input source="{{secrets.ADMIN_USER}}" target="authentication.username" />
            <zeebe:input source="{{secrets.ADMIN_PASSWORD}}" target="authentication.password" />
            <zeebe:input source="other" target="type" />
            <zeebe:input source="{{secrets.BASE_URL}}" target="baseUrl" />
            <zeebe:input source="=&#34;/o/c/characters/&#34; + string(characterId)" target="path" />
            <zeebe:input source="PATCH" target="method" />
            <zeebe:input source="=baseUrl + path" target="url" />
            <zeebe:input source="=false" target="storeResponse" />
            <zeebe:input source="=20" target="connectionTimeoutInSeconds" />
            <zeebe:input source="=20" target="readTimeoutInSeconds" />
            <zeebe:input source="=reskinDetail" target="body" />
            <zeebe:input source="=false" target="ignoreNullValues" />
          </zeebe:ioMapping>
          <zeebe:taskHeaders>
            <zeebe:header key="resultVariable" value="reskinCharacter" />
            <zeebe:header key="resultExpression" value="={&#10;  reskinCharacterId: body.id&#10;}" />
            <zeebe:header key="retryBackoff" value="PT0S" />
          </zeebe:taskHeaders>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_0mh929v</bpmn:incoming>
      </bpmn:serviceTask>
      <bpmn:serviceTask id="AIUpdateCharacterReskin" name="Update Character AI Task (Reskin)" zeebe:modelerTemplate="io.camunda.connectors.OpenAI.v1" zeebe:modelerTemplateVersion="6" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjU2cHgiIGhlaWdodD0iMjYwcHgiIHZpZXdCb3g9IjAgMCAyNTYgMjYwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KICAgIDx0aXRsZT5PcGVuQUk8L3RpdGxlPgogICAgPGc+CiAgICAgICAgPHBhdGggZD0iTTIzOS4xODM5MTQsMTA2LjIwMjc4MyBDMjQ1LjA1NDMwNCw4OC41MjQyMDk2IDI0My4wMjIyOCw2OS4xNzMzODA1IDIzMy42MDc1OTksNTMuMDk5ODg2NCBDMjE5LjQ1MTY3OCwyOC40NTg4MDIxIDE5MC45OTk3MDMsMTUuNzgzNjEyOSAxNjMuMjEzMDA3LDIxLjczOTUwNSBDMTQ3LjU1NDA3Nyw0LjMyMTQ1ODgzIDEyMy43OTQ5MDksLTMuNDIzOTg1NTQgMTAwLjg3OTAxLDEuNDE4NzM4OTggQzc3Ljk2MzExMDUsNi4yNjE0NjM0OSA1OS4zNjkwMDkzLDIyLjk1NzI1MzYgNTIuMDk1OTYyMSw0NS4yMjE0MjE5IEMzMy44NDM2NDk0LDQ4Ljk2NDQ4NjcgMTguMDkwMTcyMSw2MC4zOTI3NDkgOC44NjY3MjUxMyw3Ni41ODE4MDMzIEMtNS40NDM0OTEsMTAxLjE4Mjk2MiAtMi4xOTU0NDQzMSwxMzIuMjE1MjU1IDE2Ljg5ODY2NjIsMTUzLjMyMDA5NCBDMTEuMDA2MDg2NSwxNzAuOTkwNjU2IDEzLjAxOTcyODMsMTkwLjM0Mzk5MSAyMi40MjM4MjMxLDIwNi40MjI5OTEgQzM2LjU5NzU1NTMsMjMxLjA3MjM0NCA2NS4wNjgwMzQyLDI0My43NDY1NjYgOTIuODY5NTczOCwyMzcuNzgzMzcyIEMxMDUuMjM1NjM5LDI1MS43MDgyNDkgMTIzLjAwMTExMywyNTkuNjMwOTQyIDE0MS42MjM5NjgsMjU5LjUyNjkyIEMxNzAuMTA1MzU5LDI1OS41NTIxNjkgMTk1LjMzNzYxMSwyNDEuMTY1NzE4IDIwNC4wMzc3NzcsMjE0LjA0NTY2MSBDMjIyLjI4NzM0LDIxMC4yOTYzNTYgMjM4LjAzODQ4OSwxOTguODY5NzgzIDI0Ny4yNjcwMTQsMTgyLjY4NTI4IEMyNjEuNDA0NDUzLDE1OC4xMjc1MTUgMjU4LjE0MjQ5NCwxMjcuMjYyNzc1IDIzOS4xODM5MTQsMTA2LjIwMjc4MyBMMjM5LjE4MzkxNCwxMDYuMjAyNzgzIFogTTE0MS42MjM5NjgsMjQyLjU0MTIwNyBDMTMwLjI1NTY4MiwyNDIuNTU5MTc3IDExOS4yNDM4NzYsMjM4LjU3NDY0MiAxMTAuNTE5MzgxLDIzMS4yODYxOTcgTDExMi4wNTQxNDYsMjMwLjQxNjQ5NiBMMTYzLjcyNDU5NSwyMDAuNTkwODgxIEMxNjYuMzQwNjQ4LDE5OS4wNTY0NDQgMTY3Ljk1NDMyMSwxOTYuMjU2ODE4IDE2Ny45NzA3ODEsMTkzLjIyNDAwNSBMMTY3Ljk3MDc4MSwxMjAuMzczNzg4IEwxODkuODE1NjE0LDEzMy4wMTAwMjYgQzE5MC4wMzQxMzIsMTMzLjEyMTQyMyAxOTAuMTg2MjM1LDEzMy4zMzA1NjQgMTkwLjIyNDg4NSwxMzMuNTcyNzc0IEwxOTAuMjI0ODg1LDE5My45NDAyMjkgQzE5MC4xNjg2MDMsMjIwLjc1ODQyNyAxNjguNDQyMTY2LDI0Mi40ODQ4NjQgMTQxLjYyMzk2OCwyNDIuNTQxMjA3IFogTTM3LjE1NzU3NDksMTk3LjkzMDYyIEMzMS40NTY0OTgsMTg4LjA4NjM1OSAyOS40MDk0ODE4LDE3Ni41NDY5ODQgMzEuMzc2NjIzNywxNjUuMzQyNDI2IEwzMi45MTEzODk1LDE2Ni4yNjMyODUgTDg0LjYzMjk5NzMsMTk2LjA4ODkwMSBDODcuMjM4OTM0OSwxOTcuNjE4MjA3IDkwLjQ2ODI3MTcsMTk3LjYxODIwNyA5My4wNzQyMDkzLDE5Ni4wODg5MDEgTDE1Ni4yNTU0MDIsMTU5LjY2Mzc5MyBMMTU2LjI1NTQwMiwxODQuODg1MTExIEMxNTYuMjQzNTU3LDE4NS4xNDk3NzEgMTU2LjExMTcyNSwxODUuMzk0NjAyIDE1NS44OTcyOSwxODUuNTUwMTc2IEwxMDMuNTYxNzc2LDIxNS43MzM5MDMgQzgwLjMwNTQ5NTMsMjI5LjEzMTYzMiA1MC41OTI0OTU0LDIyMS4xNjU0MzUgMzcuMTU3NTc0OSwxOTcuOTMwNjIgWiBNMjMuNTQ5MzE4MSw4NS4zODExMjczIEMyOS4yODk5ODYxLDc1LjQ3MzMwOTcgMzguMzUxMTkxMSw2Ny45MTYyNjQ4IDQ5LjEyODc0ODIsNjQuMDQ3ODgyNSBMNDkuMTI4NzQ4MiwxMjUuNDM4NTE1IEM0OS4wODkxNDkyLDEyOC40NTk0MjUgNTAuNjk2NTM4NiwxMzEuMjYyNTU2IDUzLjMyMzc3NDgsMTMyLjc1NDIzMiBMMTE2LjE5ODAxNCwxNjkuMDI1ODY0IEw5NC4zNTMxODA4LDE4MS42NjIxMDIgQzk0LjExMzIzMjUsMTgxLjc4OTQzNCA5My44MjU3NDYxLDE4MS43ODk0MzQgOTMuNTg1Nzk3OSwxODEuNjYyMTAyIEw0MS4zNTI2MDE1LDE1MS41Mjk1MzQgQzE4LjE0MTk0MjYsMTM4LjA3NjA5OCAxMC4xODE3NjgxLDEwOC4zODU1NjIgMjMuNTQ5MzE4MSw4NS4xMjUzMzMgTDIzLjU0OTMxODEsODUuMzgxMTI3MyBaIE0yMDMuMDE0NiwxMjcuMDc1NTk4IEwxMzkuOTM1NzI1LDkwLjQ0NTg1NDUgTDE2MS43Mjk0LDc3Ljg2MDc3NDggQzE2MS45NjkzNDgsNzcuNzMzNDQzNCAxNjIuMjU2ODM0LDc3LjczMzQ0MzQgMTYyLjQ5Njc4Myw3Ny44NjA3NzQ4IEwyMTQuNzI5OTc5LDEwOC4wNDQ1MDIgQzIzMS4wMzIzMjksMTE3LjQ1MTc0NyAyNDAuNDM3Mjk0LDEzNS40MjYxMDkgMjM4Ljg3MTUwNCwxNTQuMTgyNzM5IEMyMzcuMzA1NzE0LDE3Mi45MzkzNjggMjI1LjA1MDcxOSwxODkuMTA1NTcyIDIwNy40MTQyNjIsMTk1LjY3OTYzIEwyMDcuNDE0MjYyLDEzNC4yODg5OTggQzIwNy4zMjI1MjEsMTMxLjI3Njg2NyAyMDUuNjUwNjk3LDEyOC41MzU4NTMgMjAzLjAxNDYsMTI3LjA3NTU5OCBaIE0yMjQuNzU3MTE2LDk0LjM4NTA4NjcgTDIyMy4yMjIzNSw5My40NjQyMjcyIEwxNzEuNjAzMDYsNjMuMzgyODE3MyBDMTY4Ljk4MTI5Myw2MS44NDQzNzUxIDE2NS43MzI0NTYsNjEuODQ0Mzc1MSAxNjMuMTEwNjg5LDYzLjM4MjgxNzMgTDk5Ljk4MDY1NTQsOTkuODA3OTI1OSBMOTkuOTgwNjU1NCw3NC41ODY2MDc3IEM5OS45NTMzMDA0LDc0LjMyNTQwODggMTAwLjA3MTA5NSw3NC4wNzAxODY5IDEwMC4yODc2MDksNzMuOTIxNTQyNiBMMTUyLjUyMDgwNSw0My43ODg5NzM4IEMxNjguODYzMDk4LDM0LjM3NDM1MTggMTg5LjE3NDI1NiwzNS4yNTI5MDQzIDIwNC42NDI1NzksNDYuMDQzNDg0MSBDMjIwLjExMDkwMyw1Ni44MzQwNjM4IDIyNy45NDkyNjksNzUuNTkyMzk1OSAyMjQuNzU3MTE2LDk0LjE4MDQ1MTMgTDIyNC43NTcxMTYsOTQuMzg1MDg2NyBaIE04OC4wNjA2NDA5LDEzOS4wOTc5MzEgTDY2LjIxNTgwNzYsMTI2LjUxMjg1MSBDNjUuOTk1MDM5OSwxMjYuMzc5MDkxIDY1Ljg0NTA5NjUsMTI2LjE1NDE3NiA2NS44MDY1MzY3LDEyNS44OTg5NDUgTDY1LjgwNjUzNjcsNjUuNjg0OTY2IEM2NS44MzE0NDk1LDQ2LjgyODUzNjcgNzYuNzUwMDYwNSwyOS42ODQ2MDMyIDkzLjgyNzA4NTIsMjEuNjg4MzA1NSBDMTEwLjkwNDExLDEzLjY5MjAwNzkgMTMxLjA2MzgzMywxNi4yODM1NDYyIDE0NS41NjMyLDI4LjMzODk5OCBMMTQ0LjAyODQzNCwyOS4yMDg2OTg2IEw5Mi4zNTc5ODUyLDU5LjAzNDMxNDIgQzg5Ljc0MTkzMjcsNjAuNTY4NzUxMyA4OC4xMjgyNTk3LDYzLjM2ODM3NjcgODguMTExNzk5OCw2Ni40MDExOTAxIEw4OC4wNjA2NDA5LDEzOS4wOTc5MzEgWiBNOTkuOTI5NDk2NSwxMTMuNTE4NSBMMTI4LjA2Njg3LDk3LjMwMTE0MTcgTDE1Ni4yNTU0MDIsMTEzLjUxODUgTDE1Ni4yNTU0MDIsMTQ1Ljk1MzIxOCBMMTI4LjE2OTE4NywxNjIuMTcwNTc3IEw5OS45ODA2NTU0LDE0NS45NTMyMTggTDk5LjkyOTQ5NjUsMTEzLjUxODUgWiIgZmlsbD0iIzAwMDAwMCI+PC9wYXRoPgogICAgPC9nPgo8L3N2Zz4K">
        <bpmn:documentation>Use this tool to change the name and description attributes of the character at the player's request.</bpmn:documentation>
        <bpmn:extensionElements>
          <zeebe:taskDefinition type="io.camunda:http-json:1" />
          <zeebe:ioMapping>
            <zeebe:input source="bearer" target="authentication.type" />
            <zeebe:input source="{{secrets.AI_API_KEY}}" target="authentication.token" />
            <zeebe:input source="{{secrets.AI_API_ORG}}" target="internal_organization" />
            <zeebe:input source="=if is defined(internal_organization) and internal_organization != null then {&#34;Content-Type&#34;:&#34;application/json&#34;, &#34;OpenAI-Organization&#34;:internal_organization} else {&#34;Content-Type&#34;:&#34;application/json&#34;}" target="headers" />
            <zeebe:input source="chat" target="operation" />
            <zeebe:input source="post" target="method" />
            <zeebe:input source="https://api.openai.com/v1/chat/completions" target="url" />
            <zeebe:input source="custom" target="internal_model" />
            <zeebe:input source="{{secrets.AI_API_MODEL}}" target="internal_custom_model" />
            <zeebe:input source="1" target="internal_temperature" />
            <zeebe:input source="=&#34;Update the character, reskinning the character according to the user&#39;s request, but not by changing core attributes and traits like race, class, or sex. Only update the name and the description according to the user&#39;s request.&#10;&#10;The character for reference is &#10;----&#10;Name: &#34; + name + &#34;&#10;Description: &#34; + description + &#34;&#10;Class: &#34; + class + &#34;&#10;Race: &#34; + race + &#34;&#10;Sex: &#34; + sex + &#34;&#10;----&#10;&#10;The player&#39;s request for reference is &#10;----&#10;&#34; + prompt + &#34;&#10;----&#10;&#10;Respond in JSON ONLY with nothing before or after the JSON response. Response should start and end with the JSON object brackets. The entire response should be encapsulated in the fields provided below. No single field can have a value containing more than 280 characters. Return results in json, not markdown. Do not prepend the response with the type \&#34;json\&#34;. The entire response must be in this format, exactly, with only the values differing based on your thinking. &#10;&#10;Example:&#10;{ &#10;\&#34;name\&#34;: \&#34;Aragorn Stoneheart\&#34;,&#10;\&#34;shortdescription\&#34;: \&#34;A young elf ranger, newly trained in the arts of the wild, eager to prove skill with bow and blade.\&#34;,&#10;}&#10;&#34;" target="internal_prompt" />
            <zeebe:input source="1" target="internal_choices" />
            <zeebe:input source="=append(concatenate(if is defined(internal_systemMessage) then [{&#34;role&#34;: &#34;system&#34;, &#34;content&#34;: internal_systemMessage}] else [], if is defined(internal_chatHistory) then internal_chatHistory else []), {&#34;role&#34;: &#34;user&#34;, &#34;content&#34;: internal_prompt})" target="internal_messages" />
            <zeebe:input source="={&#34;model&#34;: if is defined(internal_custom_model) then internal_custom_model else internal_model, &#34;messages&#34;: internal_messages, &#34;n&#34;: number(internal_choices), &#34;temperature&#34;: number(internal_temperature)}" target="body" />
            <zeebe:input source="30" target="connectionTimeoutInSeconds" />
          </zeebe:ioMapping>
          <zeebe:taskHeaders>
            <zeebe:header key="resultVariable" value="toolCallResult" />
            <zeebe:header key="resultExpression" value="={ &#10;  reskinDetailOriginal:response.body.choices[1].message.content,&#10;  reskinDetail:&#10;   &#10;replace(replace(replace(replace(response.body.choices[1].message.content, &#34;\\n&#34;, &#34;&#34;), &#34;```json\\n&#34;, &#34;&#34;), &#34;\\n```&#34;, &#34;&#34;), &#34;.*?(\{[\\s\\S]*\}).*&#34;, &#34;$1&#34;)&#10;}" />
            <zeebe:header key="elementTemplateVersion" value="6" />
            <zeebe:header key="elementTemplateId" value="io.camunda.connectors.OpenAI.v1" />
          </zeebe:taskHeaders>
        </bpmn:extensionElements>
        <bpmn:outgoing>Flow_0mh929v</bpmn:outgoing>
      </bpmn:serviceTask>
      <bpmn:sequenceFlow id="Flow_0mh929v" sourceRef="AIUpdateCharacterReskin" targetRef="Activity_11t1fvq" />
      <bpmn:sequenceFlow id="Flow_0su35oo" sourceRef="AIOpenChest" targetRef="OpenchestAddIntentory" />
      <bpmn:serviceTask id="Activity_09goiqg" name="Send Character&#10;to Liferay" zeebe:modelerTemplate="cddb82b6-1f10-447e-a582-a18d246dd516" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgdmlld0JveD0iMCAwIDk2IDk2Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzBiNWZmZjt9PC9zdHlsZT48L2RlZnM+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNzEsMjFIMjVjLTIuMjA5MiwwLTQsMS43OTA4LTQsNHY0NmMwLDIuMjA5MSwxLjc5MDgsNCw0LDRoNDZjMi4yMDksMCw0LTEuNzkwOSw0LTRWMjVjMC0yLjIwOTItMS43OTEtNC00LTRaTTM3LDU2YzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0xMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMTBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0xMCwzMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMjBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0wLTEwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMTAsMzBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0wLTEwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0yMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTEwLDMwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0xMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMTBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2WiIvPjwvc3ZnPg==">
        <bpmn:extensionElements>
          <zeebe:taskDefinition type="io.camunda:http-json:1" retries="3" />
          <zeebe:ioMapping>
            <zeebe:input source="basic" target="authentication.type" />
            <zeebe:input source="{{secrets.ADMIN_USER}}" target="authentication.username" />
            <zeebe:input source="{{secrets.ADMIN_PASSWORD}}" target="authentication.password" />
            <zeebe:input source="other" target="type" />
            <zeebe:input source="{{secrets.BASE_URL}}" target="baseUrl" />
            <zeebe:input source="=&#34;/o/c/characters&#34;" target="path" />
            <zeebe:input source="POST" target="method" />
            <zeebe:input source="=baseUrl + path" target="url" />
            <zeebe:input source="=false" target="storeResponse" />
            <zeebe:input source="=20" target="connectionTimeoutInSeconds" />
            <zeebe:input source="=20" target="readTimeoutInSeconds" />
            <zeebe:input source="=userDetail" target="body" />
            <zeebe:input source="=false" target="ignoreNullValues" />
          </zeebe:ioMapping>
          <zeebe:taskHeaders>
            <zeebe:header key="resultVariable" value="newCharacter" />
            <zeebe:header key="resultExpression" value="={&#10;  characterId: string(body.id)&#10;}" />
            <zeebe:header key="retryBackoff" value="PT0S" />
          </zeebe:taskHeaders>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1nxoofd</bpmn:incoming>
      </bpmn:serviceTask>
      <bpmn:serviceTask id="AICreateCharacter" name="Generate&#10;Â Character" zeebe:modelerTemplate="io.camunda.connectors.OpenAI.v1" zeebe:modelerTemplateVersion="6" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjU2cHgiIGhlaWdodD0iMjYwcHgiIHZpZXdCb3g9IjAgMCAyNTYgMjYwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KICAgIDx0aXRsZT5PcGVuQUk8L3RpdGxlPgogICAgPGc+CiAgICAgICAgPHBhdGggZD0iTTIzOS4xODM5MTQsMTA2LjIwMjc4MyBDMjQ1LjA1NDMwNCw4OC41MjQyMDk2IDI0My4wMjIyOCw2OS4xNzMzODA1IDIzMy42MDc1OTksNTMuMDk5ODg2NCBDMjE5LjQ1MTY3OCwyOC40NTg4MDIxIDE5MC45OTk3MDMsMTUuNzgzNjEyOSAxNjMuMjEzMDA3LDIxLjczOTUwNSBDMTQ3LjU1NDA3Nyw0LjMyMTQ1ODgzIDEyMy43OTQ5MDksLTMuNDIzOTg1NTQgMTAwLjg3OTAxLDEuNDE4NzM4OTggQzc3Ljk2MzExMDUsNi4yNjE0NjM0OSA1OS4zNjkwMDkzLDIyLjk1NzI1MzYgNTIuMDk1OTYyMSw0NS4yMjE0MjE5IEMzMy44NDM2NDk0LDQ4Ljk2NDQ4NjcgMTguMDkwMTcyMSw2MC4zOTI3NDkgOC44NjY3MjUxMyw3Ni41ODE4MDMzIEMtNS40NDM0OTEsMTAxLjE4Mjk2MiAtMi4xOTU0NDQzMSwxMzIuMjE1MjU1IDE2Ljg5ODY2NjIsMTUzLjMyMDA5NCBDMTEuMDA2MDg2NSwxNzAuOTkwNjU2IDEzLjAxOTcyODMsMTkwLjM0Mzk5MSAyMi40MjM4MjMxLDIwNi40MjI5OTEgQzM2LjU5NzU1NTMsMjMxLjA3MjM0NCA2NS4wNjgwMzQyLDI0My43NDY1NjYgOTIuODY5NTczOCwyMzcuNzgzMzcyIEMxMDUuMjM1NjM5LDI1MS43MDgyNDkgMTIzLjAwMTExMywyNTkuNjMwOTQyIDE0MS42MjM5NjgsMjU5LjUyNjkyIEMxNzAuMTA1MzU5LDI1OS41NTIxNjkgMTk1LjMzNzYxMSwyNDEuMTY1NzE4IDIwNC4wMzc3NzcsMjE0LjA0NTY2MSBDMjIyLjI4NzM0LDIxMC4yOTYzNTYgMjM4LjAzODQ4OSwxOTguODY5NzgzIDI0Ny4yNjcwMTQsMTgyLjY4NTI4IEMyNjEuNDA0NDUzLDE1OC4xMjc1MTUgMjU4LjE0MjQ5NCwxMjcuMjYyNzc1IDIzOS4xODM5MTQsMTA2LjIwMjc4MyBMMjM5LjE4MzkxNCwxMDYuMjAyNzgzIFogTTE0MS42MjM5NjgsMjQyLjU0MTIwNyBDMTMwLjI1NTY4MiwyNDIuNTU5MTc3IDExOS4yNDM4NzYsMjM4LjU3NDY0MiAxMTAuNTE5MzgxLDIzMS4yODYxOTcgTDExMi4wNTQxNDYsMjMwLjQxNjQ5NiBMMTYzLjcyNDU5NSwyMDAuNTkwODgxIEMxNjYuMzQwNjQ4LDE5OS4wNTY0NDQgMTY3Ljk1NDMyMSwxOTYuMjU2ODE4IDE2Ny45NzA3ODEsMTkzLjIyNDAwNSBMMTY3Ljk3MDc4MSwxMjAuMzczNzg4IEwxODkuODE1NjE0LDEzMy4wMTAwMjYgQzE5MC4wMzQxMzIsMTMzLjEyMTQyMyAxOTAuMTg2MjM1LDEzMy4zMzA1NjQgMTkwLjIyNDg4NSwxMzMuNTcyNzc0IEwxOTAuMjI0ODg1LDE5My45NDAyMjkgQzE5MC4xNjg2MDMsMjIwLjc1ODQyNyAxNjguNDQyMTY2LDI0Mi40ODQ4NjQgMTQxLjYyMzk2OCwyNDIuNTQxMjA3IFogTTM3LjE1NzU3NDksMTk3LjkzMDYyIEMzMS40NTY0OTgsMTg4LjA4NjM1OSAyOS40MDk0ODE4LDE3Ni41NDY5ODQgMzEuMzc2NjIzNywxNjUuMzQyNDI2IEwzMi45MTEzODk1LDE2Ni4yNjMyODUgTDg0LjYzMjk5NzMsMTk2LjA4ODkwMSBDODcuMjM4OTM0OSwxOTcuNjE4MjA3IDkwLjQ2ODI3MTcsMTk3LjYxODIwNyA5My4wNzQyMDkzLDE5Ni4wODg5MDEgTDE1Ni4yNTU0MDIsMTU5LjY2Mzc5MyBMMTU2LjI1NTQwMiwxODQuODg1MTExIEMxNTYuMjQzNTU3LDE4NS4xNDk3NzEgMTU2LjExMTcyNSwxODUuMzk0NjAyIDE1NS44OTcyOSwxODUuNTUwMTc2IEwxMDMuNTYxNzc2LDIxNS43MzM5MDMgQzgwLjMwNTQ5NTMsMjI5LjEzMTYzMiA1MC41OTI0OTU0LDIyMS4xNjU0MzUgMzcuMTU3NTc0OSwxOTcuOTMwNjIgWiBNMjMuNTQ5MzE4MSw4NS4zODExMjczIEMyOS4yODk5ODYxLDc1LjQ3MzMwOTcgMzguMzUxMTkxMSw2Ny45MTYyNjQ4IDQ5LjEyODc0ODIsNjQuMDQ3ODgyNSBMNDkuMTI4NzQ4MiwxMjUuNDM4NTE1IEM0OS4wODkxNDkyLDEyOC40NTk0MjUgNTAuNjk2NTM4NiwxMzEuMjYyNTU2IDUzLjMyMzc3NDgsMTMyLjc1NDIzMiBMMTE2LjE5ODAxNCwxNjkuMDI1ODY0IEw5NC4zNTMxODA4LDE4MS42NjIxMDIgQzk0LjExMzIzMjUsMTgxLjc4OTQzNCA5My44MjU3NDYxLDE4MS43ODk0MzQgOTMuNTg1Nzk3OSwxODEuNjYyMTAyIEw0MS4zNTI2MDE1LDE1MS41Mjk1MzQgQzE4LjE0MTk0MjYsMTM4LjA3NjA5OCAxMC4xODE3NjgxLDEwOC4zODU1NjIgMjMuNTQ5MzE4MSw4NS4xMjUzMzMgTDIzLjU0OTMxODEsODUuMzgxMTI3MyBaIE0yMDMuMDE0NiwxMjcuMDc1NTk4IEwxMzkuOTM1NzI1LDkwLjQ0NTg1NDUgTDE2MS43Mjk0LDc3Ljg2MDc3NDggQzE2MS45NjkzNDgsNzcuNzMzNDQzNCAxNjIuMjU2ODM0LDc3LjczMzQ0MzQgMTYyLjQ5Njc4Myw3Ny44NjA3NzQ4IEwyMTQuNzI5OTc5LDEwOC4wNDQ1MDIgQzIzMS4wMzIzMjksMTE3LjQ1MTc0NyAyNDAuNDM3Mjk0LDEzNS40MjYxMDkgMjM4Ljg3MTUwNCwxNTQuMTgyNzM5IEMyMzcuMzA1NzE0LDE3Mi45MzkzNjggMjI1LjA1MDcxOSwxODkuMTA1NTcyIDIwNy40MTQyNjIsMTk1LjY3OTYzIEwyMDcuNDE0MjYyLDEzNC4yODg5OTggQzIwNy4zMjI1MjEsMTMxLjI3Njg2NyAyMDUuNjUwNjk3LDEyOC41MzU4NTMgMjAzLjAxNDYsMTI3LjA3NTU5OCBaIE0yMjQuNzU3MTE2LDk0LjM4NTA4NjcgTDIyMy4yMjIzNSw5My40NjQyMjcyIEwxNzEuNjAzMDYsNjMuMzgyODE3MyBDMTY4Ljk4MTI5Myw2MS44NDQzNzUxIDE2NS43MzI0NTYsNjEuODQ0Mzc1MSAxNjMuMTEwNjg5LDYzLjM4MjgxNzMgTDk5Ljk4MDY1NTQsOTkuODA3OTI1OSBMOTkuOTgwNjU1NCw3NC41ODY2MDc3IEM5OS45NTMzMDA0LDc0LjMyNTQwODggMTAwLjA3MTA5NSw3NC4wNzAxODY5IDEwMC4yODc2MDksNzMuOTIxNTQyNiBMMTUyLjUyMDgwNSw0My43ODg5NzM4IEMxNjguODYzMDk4LDM0LjM3NDM1MTggMTg5LjE3NDI1NiwzNS4yNTI5MDQzIDIwNC42NDI1NzksNDYuMDQzNDg0MSBDMjIwLjExMDkwMyw1Ni44MzQwNjM4IDIyNy45NDkyNjksNzUuNTkyMzk1OSAyMjQuNzU3MTE2LDk0LjE4MDQ1MTMgTDIyNC43NTcxMTYsOTQuMzg1MDg2NyBaIE04OC4wNjA2NDA5LDEzOS4wOTc5MzEgTDY2LjIxNTgwNzYsMTI2LjUxMjg1MSBDNjUuOTk1MDM5OSwxMjYuMzc5MDkxIDY1Ljg0NTA5NjUsMTI2LjE1NDE3NiA2NS44MDY1MzY3LDEyNS44OTg5NDUgTDY1LjgwNjUzNjcsNjUuNjg0OTY2IEM2NS44MzE0NDk1LDQ2LjgyODUzNjcgNzYuNzUwMDYwNSwyOS42ODQ2MDMyIDkzLjgyNzA4NTIsMjEuNjg4MzA1NSBDMTEwLjkwNDExLDEzLjY5MjAwNzkgMTMxLjA2MzgzMywxNi4yODM1NDYyIDE0NS41NjMyLDI4LjMzODk5OCBMMTQ0LjAyODQzNCwyOS4yMDg2OTg2IEw5Mi4zNTc5ODUyLDU5LjAzNDMxNDIgQzg5Ljc0MTkzMjcsNjAuNTY4NzUxMyA4OC4xMjgyNTk3LDYzLjM2ODM3NjcgODguMTExNzk5OCw2Ni40MDExOTAxIEw4OC4wNjA2NDA5LDEzOS4wOTc5MzEgWiBNOTkuOTI5NDk2NSwxMTMuNTE4NSBMMTI4LjA2Njg3LDk3LjMwMTE0MTcgTDE1Ni4yNTU0MDIsMTEzLjUxODUgTDE1Ni4yNTU0MDIsMTQ1Ljk1MzIxOCBMMTI4LjE2OTE4NywxNjIuMTcwNTc3IEw5OS45ODA2NTU0LDE0NS45NTMyMTggTDk5LjkyOTQ5NjUsMTEzLjUxODUgWiIgZmlsbD0iIzAwMDAwMCI+PC9wYXRoPgogICAgPC9nPgo8L3N2Zz4K">
        <bpmn:documentation>Use this tool to create a new character, attributes, and description.</bpmn:documentation>
        <bpmn:extensionElements>
          <zeebe:taskDefinition type="io.camunda:http-json:1" />
          <zeebe:ioMapping>
            <zeebe:input source="bearer" target="authentication.type" />
            <zeebe:input source="{{secrets.AI_API_KEY}}" target="authentication.token" />
            <zeebe:input source="{{secrets.AI_API_ORG}}" target="internal_organization" />
            <zeebe:input source="=if is defined(internal_organization) and internal_organization != null then {&#34;Content-Type&#34;:&#34;application/json&#34;, &#34;OpenAI-Organization&#34;:internal_organization} else {&#34;Content-Type&#34;:&#34;application/json&#34;}" target="headers" />
            <zeebe:input source="chat" target="operation" />
            <zeebe:input source="post" target="method" />
            <zeebe:input source="https://api.openai.com/v1/chat/completions" target="url" />
            <zeebe:input source="custom" target="internal_model" />
            <zeebe:input source="{{secrets.AI_API_MODEL}}" target="internal_custom_model" />
            <zeebe:input source="1" target="internal_temperature" />
            <zeebe:input source="=&#34;Choose random, appropriate attributes for a fantasy character in a role-playing game â€“Â name, race, sex, short description, class, strength, dexterity, intelligence, wisdom, charisma, hp, number of spell slots (spells), level. Make sure the name matches the character&#39;s race, class, and sex. Unless specified otherwise, use a balanced distribution of attributes suitable for a low-level (3-5) adventurer.The &#10;r_userToCharacter_userId value must be set to &#34; + userId + &#34;.&#10;&#10;The player&#39;s request for reference is &#10;----&#10;&#34; + prompt + &#34;&#10;----&#10;&#10;Respond in JSON ONLY with nothing before or after the JSON response. Response should start and end with the JSON object brackets. Return results in json, not markdown. Do not prepend the response with the type \&#34;json\&#34;.&#10;&#10;**The character you invent must be used to populate these fields. Do not invent new values here: if you decided the character&#39;s name was Aragorn Stoneheart, you must add that value to the name field in the JSON.**&#10;&#10;Example:&#10;{ &#10;\&#34;name\&#34;: \&#34;Aragorn Stoneheart\&#34;,&#10;\&#34;race\&#34;: \&#34;Elf\&#34;,&#10;\&#34;sex\&#34;: \&#34;male\&#34;,&#10;\&#34;class\&#34;: \&#34;Ranger\&#34;,&#10;\&#34;shortdescription\&#34;: \&#34;A young elf ranger, newly trained in the arts of the wild, eager to prove skill with bow and blade.\&#34;,&#10;\&#34;strength\&#34;: 14,&#10;\&#34;dexterity\&#34;: 16,&#10;\&#34;intelligence\&#34;: 14,&#10;\&#34;wisdom\&#34;: 12,&#10;\&#34;charisma\&#34;: 20,&#10;\&#34;hp\&#34;: 42,&#10;\&#34;spells\&#34;: 3,&#10;\&#34;level\&#34;: 4,&#10;\&#34;r_userToCharacter_userId\&#34;: &#34; + userId + &#34;,&#10;&#10;}&#34;" target="internal_prompt" />
            <zeebe:input source="1" target="internal_choices" />
            <zeebe:input source="=append(concatenate(if is defined(internal_systemMessage) then [{&#34;role&#34;: &#34;system&#34;, &#34;content&#34;: internal_systemMessage}] else [], if is defined(internal_chatHistory) then internal_chatHistory else []), {&#34;role&#34;: &#34;user&#34;, &#34;content&#34;: internal_prompt})" target="internal_messages" />
            <zeebe:input source="={&#34;model&#34;: if is defined(internal_custom_model) then internal_custom_model else internal_model, &#34;messages&#34;: internal_messages, &#34;n&#34;: number(internal_choices), &#34;temperature&#34;: number(internal_temperature)}" target="body" />
            <zeebe:input source="30" target="connectionTimeoutInSeconds" />
          </zeebe:ioMapping>
          <zeebe:taskHeaders>
            <zeebe:header key="resultVariable" value="toolCallResult" />
            <zeebe:header key="resultExpression" value="={ &#10;  userDetailOriginal:response.body.choices[1].message.content,&#10;  userDetail:&#10;   &#10;replace(replace(replace(replace(response.body.choices[1].message.content, &#34;\\n&#34;, &#34;&#34;), &#34;```json\\n&#34;, &#34;&#34;), &#34;\\n```&#34;, &#34;&#34;), &#34;.*?(\{[\\s\\S]*\}).*&#34;, &#34;$1&#34;)&#10;}" />
            <zeebe:header key="elementTemplateVersion" value="6" />
            <zeebe:header key="elementTemplateId" value="io.camunda.connectors.OpenAI.v1" />
          </zeebe:taskHeaders>
        </bpmn:extensionElements>
        <bpmn:outgoing>Flow_1nxoofd</bpmn:outgoing>
        <bpmn:outgoing>Flow_11iqg7s</bpmn:outgoing>
      </bpmn:serviceTask>
      <bpmn:sequenceFlow id="Flow_1nxoofd" sourceRef="AICreateCharacter" targetRef="Activity_09goiqg" />
      <bpmn:intermediateThrowEvent id="Event_035wec5">
        <bpmn:documentation>Offload Inventory Creation to Sub Process</bpmn:documentation>
        <bpmn:incoming>Flow_11iqg7s</bpmn:incoming>
        <bpmn:signalEventDefinition id="SignalEventDefinition_1h9fbhc" signalRef="Signal_3rksb93" />
      </bpmn:intermediateThrowEvent>
      <bpmn:sequenceFlow id="Flow_11iqg7s" sourceRef="AICreateCharacter" targetRef="Event_035wec5" />
      <bpmn:intermediateThrowEvent id="Event_11wvqt1">
        <bpmn:documentation>Offload Inventory Creation to Sub Process</bpmn:documentation>
        <bpmn:incoming>Flow_1u8u6yk</bpmn:incoming>
        <bpmn:signalEventDefinition id="SignalEventDefinition_132z0uh" signalRef="Signal_2uvsga2" />
      </bpmn:intermediateThrowEvent>
      <bpmn:sequenceFlow id="Flow_1u8u6yk" sourceRef="CreateQuest" targetRef="Event_11wvqt1" />
    </bpmn:adHocSubProcess>
    <bpmn:exclusiveGateway id="Gateway_13hafhq" name="Should I run more tools?" default="Flow_1llxacj">
      <bpmn:incoming>Flow_1vkq7i5</bpmn:incoming>
      <bpmn:outgoing>Flow_1llxacj</bpmn:outgoing>
      <bpmn:outgoing>Flow_0sbvwpf</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_1llxacj" name="No" sourceRef="Gateway_13hafhq" targetRef="Activity_0i2eafb" />
    <bpmn:sequenceFlow id="Flow_0sbvwpf" name="Yes" sourceRef="Gateway_13hafhq" targetRef="aiTools">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=not(agent.toolCalls = null) and count(agent.toolCalls) &gt; 0</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:exclusiveGateway id="Gateway_0ftesrs">
      <bpmn:incoming>Flow_0m99pwe</bpmn:incoming>
      <bpmn:incoming>Flow_1rupk0u</bpmn:incoming>
      <bpmn:outgoing>Flow_0yh4ha0</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0yh4ha0" sourceRef="Gateway_0ftesrs" targetRef="Activity_01xvqn0" />
    <bpmn:sequenceFlow id="Flow_1rupk0u" sourceRef="aiTools" targetRef="Gateway_0ftesrs" />
    <bpmn:serviceTask id="Activity_01xvqn0" name="Agentic DM Review" zeebe:modelerTemplate="io.camunda.connectors.agenticai.aiagent.v1" zeebe:modelerTemplateVersion="4" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiNBNTZFRkYiLz4KPG1hc2sgaWQ9InBhdGgtMi1vdXRzaWRlLTFfMTg1XzYiIG1hc2tVbml0cz0idXNlclNwYWNlT25Vc2UiIHg9IjQiIHk9IjQiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0iYmxhY2siPgo8cmVjdCBmaWxsPSJ3aGl0ZSIgeD0iNCIgeT0iNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuMDEwNSAxMi4wOTg3QzE4LjQ5IDEwLjU4OTQgMTcuMTU5NCA4LjEwODE0IDE2LjE3OTkgNi4wMTEwM0MxNi4xNTIgNi4wMDQ1MSAxNi4xMTc2IDYgMTYuMDc5NCA2QzE2LjA0MTEgNiAxNi4wMDY2IDYuMDA0NTEgMTUuOTc4OCA2LjAxMTA0QzE0Ljk5OTQgOC4xMDgxNCAxMy42Njk3IDEwLjU4ODkgMTIuMTQ4MSAxMi4wOTgxQzEwLjYyNjkgMTMuNjA3MSA4LjEyNTY4IDE0LjkyNjQgNi4wMTE1NyAxNS44OTgxQzYuMDA0NzQgMTUuOTI2MSA2IDE1Ljk2MTEgNiAxNkM2IDE2LjAzODcgNi4wMDQ2OCAxNi4wNzM2IDYuMDExNDQgMTYuMTAxNEM4LjEyNTE5IDE3LjA3MjkgMTAuNjI2MiAxOC4zOTE5IDEyLjE0NzcgMTkuOTAxNkMxMy42Njk3IDIxLjQxMDcgMTQuOTk5NiAyMy44OTIgMTUuOTc5MSAyNS45ODlDMTYuMDA2OCAyNS45OTU2IDE2LjA0MTEgMjYgMTYuMDc5MyAyNkMxNi4xMTc1IDI2IDE2LjE1MTkgMjUuOTk1NCAxNi4xNzk2IDI1Ljk4OUMxNy4xNTkxIDIzLjg5MiAxOC40ODg4IDIxLjQxMSAyMC4wMDk5IDE5LjkwMjFNMjAuMDA5OSAxOS45MDIxQzIxLjUyNTMgMTguMzk4NyAyMy45NDY1IDE3LjA2NjkgMjUuOTkxNSAxNi4wODI0QzI1Ljk5NjUgMTYuMDU5MyAyNiAxNi4wMzEgMjYgMTUuOTk5N0MyNiAxNS45Njg0IDI1Ljk5NjUgMTUuOTQwMyAyNS45OTE1IDE1LjkxNzFDMjMuOTQ3NCAxNC45MzI3IDIxLjUyNTkgMTMuNjAxIDIwLjAxMDUgMTIuMDk4NyIvPgo8L21hc2s+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuMDEwNSAxMi4wOTg3QzE4LjQ5IDEwLjU4OTQgMTcuMTU5NCA4LjEwODE0IDE2LjE3OTkgNi4wMTEwM0MxNi4xNTIgNi4wMDQ1MSAxNi4xMTc2IDYgMTYuMDc5NCA2QzE2LjA0MTEgNiAxNi4wMDY2IDYuMDA0NTEgMTUuOTc4OCA2LjAxMTA0QzE0Ljk5OTQgOC4xMDgxNCAxMy42Njk3IDEwLjU4ODkgMTIuMTQ4MSAxMi4wOTgxQzEwLjYyNjkgMTMuNjA3MSA4LjEyNTY4IDE0LjkyNjQgNi4wMTE1NyAxNS44OTgxQzYuMDA0NzQgMTUuOTI2MSA2IDE1Ljk2MTEgNiAxNkM2IDE2LjAzODcgNi4wMDQ2OCAxNi4wNzM2IDYuMDExNDQgMTYuMTAxNEM4LjEyNTE5IDE3LjA3MjkgMTAuNjI2MiAxOC4zOTE5IDEyLjE0NzcgMTkuOTAxNkMxMy42Njk3IDIxLjQxMDcgMTQuOTk5NiAyMy44OTIgMTUuOTc5MSAyNS45ODlDMTYuMDA2OCAyNS45OTU2IDE2LjA0MTEgMjYgMTYuMDc5MyAyNkMxNi4xMTc1IDI2IDE2LjE1MTkgMjUuOTk1NCAxNi4xNzk2IDI1Ljk4OUMxNy4xNTkxIDIzLjg5MiAxOC40ODg4IDIxLjQxMSAyMC4wMDk5IDE5LjkwMjFNMjAuMDA5OSAxOS45MDIxQzIxLjUyNTMgMTguMzk4NyAyMy45NDY1IDE3LjA2NjkgMjUuOTkxNSAxNi4wODI0QzI1Ljk5NjUgMTYuMDU5MyAyNiAxNi4wMzEgMjYgMTUuOTk5N0MyNiAxNS45Njg0IDI1Ljk5NjUgMTUuOTQwMyAyNS45OTE1IDE1LjkxNzFDMjMuOTQ3NCAxNC45MzI3IDIxLjUyNTkgMTMuNjAxIDIwLjAxMDUgMTIuMDk4NyIgZmlsbD0id2hpdGUiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC4wMTA1IDEyLjA5ODdDMTguNDkgMTAuNTg5NCAxNy4xNTk0IDguMTA4MTQgMTYuMTc5OSA2LjAxMTAzQzE2LjE1MiA2LjAwNDUxIDE2LjExNzYgNiAxNi4wNzk0IDZDMTYuMDQxMSA2IDE2LjAwNjYgNi4wMDQ1MSAxNS45Nzg4IDYuMDExMDRDMTQuOTk5NCA4LjEwODE0IDEzLjY2OTcgMTAuNTg4OSAxMi4xNDgxIDEyLjA5ODFDMTAuNjI2OSAxMy42MDcxIDguMTI1NjggMTQuOTI2NCA2LjAxMTU3IDE1Ljg5ODFDNi4wMDQ3NCAxNS45MjYxIDYgMTUuOTYxMSA2IDE2QzYgMTYuMDM4NyA2LjAwNDY4IDE2LjA3MzYgNi4wMTE0NCAxNi4xMDE0QzguMTI1MTkgMTcuMDcyOSAxMC42MjYyIDE4LjM5MTkgMTIuMTQ3NyAxOS45MDE2QzEzLjY2OTcgMjEuNDEwNyAxNC45OTk2IDIzLjg5MiAxNS45NzkxIDI1Ljk4OUMxNi4wMDY4IDI1Ljk5NTYgMTYuMDQxMSAyNiAxNi4wNzkzIDI2QzE2LjExNzUgMjYgMTYuMTUxOSAyNS45OTU0IDE2LjE3OTYgMjUuOTg5QzE3LjE1OTEgMjMuODkyIDE4LjQ4ODggMjEuNDExIDIwLjAwOTkgMTkuOTAyMU0yMC4wMDk5IDE5LjkwMjFDMjEuNTI1MyAxOC4zOTg3IDIzLjk0NjUgMTcuMDY2OSAyNS45OTE1IDE2LjA4MjRDMjUuOTk2NSAxNi4wNTkzIDI2IDE2LjAzMSAyNiAxNS45OTk3QzI2IDE1Ljk2ODQgMjUuOTk2NSAxNS45NDAzIDI1Ljk5MTUgMTUuOTE3MUMyMy45NDc0IDE0LjkzMjcgMjEuNTI1OSAxMy42MDEgMjAuMDEwNSAxMi4wOTg3IiBzdHJva2U9IiM0OTFEOEIiIHN0cm9rZS13aWR0aD0iNCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgbWFzaz0idXJsKCNwYXRoLTItb3V0c2lkZS0xXzE4NV82KSIvPgo8L3N2Zz4K">
      <bpmn:documentation>The Agentic Dungeon Master (LLM based) - has access to knowledge and thinking capabilities that allow it to make decisions to assist in role playing games</bpmn:documentation>
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda.agenticai:aiagent:1" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input source="openai" target="provider.type" />
          <zeebe:input source="{{secrets.AI_API_KEY}}" target="provider.openai.authentication.apiKey" />
          <zeebe:input source="{{secrets.AI_API_ORG}}" target="provider.openai.authentication.organizationId" />
          <zeebe:input source="{{secrets.AI_API_AGENTIC_MODEL}}" target="provider.openai.model.model" />
          <zeebe:input source="=500" target="provider.openai.model.parameters.maxCompletionTokens" />
          <zeebe:input source="=1" target="provider.openai.model.parameters.temperature" />
          <zeebe:input source="=0.1" target="provider.openai.model.parameters.topP" />
          <zeebe:input source="=&#34;You are **TaskAgent**, a helpful, but stern, D&#38;D Dungeon Master agent that can handle a wide variety of player requests using your own domain knowledge **and** any tools explicitly provided to you at runtime.&#10;&#10;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&#10;# 0. CONTEXT â€” WHO IS THE â€œPlayerâ€?&#10;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&#10;â€¢ **Every incoming message is from the player or a character owned by the player.**  &#10;â€¢ Treat â€œplayerâ€ and â€œcharacterâ€ as the same person throughout the conversation.  &#10;&#10;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&#10;# 1. MANDATORY TOOL-DRIVEN WORKFLOW&#10;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&#10;For **every** player request, follow this exact sequence:&#10;&#10;1. **Inspect** the full list of available tools.  &#10;2. **Evaluate** each toolâ€™s relevance.  &#10;3. **Generate** content related to the playerâ€™s request using generic content creation and the tools supplied.&#10;3. **Invoke one relevant tool** *before* replying to the player.  &#10;   â€¢ If no domain-specific tool fits, you **must** say you are unable to help as described in Â§1-6.&#10;4. **Wait** for tool outputs before replying to the player.&#10;5. **Never** invent or call tools that are not in the supplied list.  &#10;6. After exhausting every relevant toolâ€”and expert escalation if requiredâ€”if you still cannot help, reply with something like `I am unable to fulfill your request... &#60;brief explanation&#62;`.&#10;7. **Always** respond to the player in a single message in the tone of an experienced D&#38;D Dungeon Master, never multiple messages.&#10;&#10;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&#10;# 2. DATA PRIVACY &#38; LOOKUPS&#10;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&#10;When real-person data or contact details are involved, do **not** fabricate information.  &#10;Use the appropriate lookup tools; if data cannot be retrieved, reply with the standard error message above.&#10;&#10;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&#10;# 3. CHAIN-OF-THOUGHT FORMAT  (MANDATORY BEFORE EVERY TOOL CALL)&#10;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&#10;Wrap minimal, inspectable reasoning in *exactly* this XML template:&#10;&#10;&#60;thinking&#62;&#10;  &#60;context&#62;â€¦briefly state the playerâ€™s need and current stateâ€¦&#60;/context&#62;&#10;  &#60;reflection&#62;â€¦list candidate tools, justify which you will call next and whyâ€¦&#60;/reflection&#62;&#10;&#60;/thinking&#62;&#10;&#10;Reveal **no** additional private reasoning outside these tags.&#10;&#34;" target="data.systemPrompt.prompt" />
          <zeebe:input source="=prompt" target="data.userPrompt.prompt" />
          <zeebe:input source="aiTools" target="data.tools.containerElementId" />
          <zeebe:input source="=toolCallResults" target="data.tools.toolCallResults" />
          <zeebe:input source="=agent.context" target="data.context" />
          <zeebe:input source="in-process" target="data.memory.storage.type" />
          <zeebe:input source="=20" target="data.memory.contextWindowSize" />
          <zeebe:input source="=10" target="data.limits.maxModelCalls" />
          <zeebe:input source="text" target="data.response.format.type" />
          <zeebe:input source="=false" target="data.response.format.parseJson" />
          <zeebe:input source="=false" target="data.response.includeAssistantMessage" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="elementTemplateVersion" value="4" />
          <zeebe:header key="elementTemplateId" value="io.camunda.connectors.agenticai.aiagent.v1" />
          <zeebe:header key="resultVariable" value="agent" />
          <zeebe:header key="retryBackoff" value="PT0S" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0yh4ha0</bpmn:incoming>
      <bpmn:outgoing>Flow_1vkq7i5</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_1vkq7i5" sourceRef="Activity_01xvqn0" targetRef="Gateway_13hafhq" />
    <bpmn:startEvent id="StartEvent_AIDMChat_1" name="LiferayForge Message Received" zeebe:modelerTemplate="ef01719a-182d-471e-8a7b-de2317b01a01" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgdmlld0JveD0iMCAwIDk2IDk2Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzBiNWZmZjt9PC9zdHlsZT48L2RlZnM+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNzEsMjFIMjVjLTIuMjA5MiwwLTQsMS43OTA4LTQsNHY0NmMwLDIuMjA5MSwxLjc5MDgsNCw0LDRoNDZjMi4yMDksMCw0LTEuNzkwOSw0LTRWMjVjMC0yLjIwOTItMS43OTEtNC00LTRaTTM3LDU2YzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0xMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMTBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0xMCwzMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMjBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0wLTEwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMTAsMzBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0wLTEwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0yMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTEwLDMwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0xMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMTBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2WiIvPjwvc3ZnPg==">
      <bpmn:extensionElements>
        <zeebe:properties>
          <zeebe:property name="inbound.type" value="io.camunda:webhook:1" />
          <zeebe:property name="inbound.method" value="any" />
          <zeebe:property name="inbound.context" value="agentic-dm-chat-2" />
          <zeebe:property name="inbound.auth.type" value="APIKEY" />
          <zeebe:property name="inbound.auth.apiKey" value="{{secrets.WEBHOOK_SECRET}}" />
          <zeebe:property name="inbound.auth.apiKeyLocator" value="=get value(request.headers, &#34;x-api-key&#34;)" />
          <zeebe:property name="consumeUnmatchedEvents" value="true" />
          <zeebe:property name="resultVariable" value="DMRequest" />
          <zeebe:property name="resultExpression" value="={&#10;&#34;userId&#34;:request.body.userId,&#10;&#34;classPK&#34;:request.body.classPK,&#10;  &#34;erc&#34;: request.body.objectEntry.externalReferenceCode,&#10;&#34;message&#34;:request.body.objectEntry.values.message,&#10;  &#34;characterId&#34;:string(request.body.objectEntry.values.characterID)&#10;}" />
        </zeebe:properties>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_0u7g446</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:scriptTask id="Activity_0by2dzl" name="Create Agentic DM Prompt">
      <bpmn:extensionElements>
        <zeebe:script expression="=&#34;User &#34; + userId + &#34; has sent a request to the dungeon master. The request is &#39;&#34; + message + &#34;&#39; .&#34;" resultVariable="prompt" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_03rhk49</bpmn:incoming>
      <bpmn:incoming>Flow_1254q4v</bpmn:incoming>
      <bpmn:outgoing>Flow_0m99pwe</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:sequenceFlow id="Flow_0u7g446" sourceRef="StartEvent_AIDMChat_1" targetRef="Gateway_1ax5ede" />
    <bpmn:sequenceFlow id="Flow_0m99pwe" sourceRef="Activity_0by2dzl" targetRef="Gateway_0ftesrs" />
    <bpmn:serviceTask id="Activity_0i2eafb" name="LiferayForge API Response" zeebe:modelerTemplate="cddb82b6-1f10-447e-a582-a18d246dd516" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgdmlld0JveD0iMCAwIDk2IDk2Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzBiNWZmZjt9PC9zdHlsZT48L2RlZnM+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNzEsMjFIMjVjLTIuMjA5MiwwLTQsMS43OTA4LTQsNHY0NmMwLDIuMjA5MSwxLjc5MDgsNCw0LDRoNDZjMi4yMDksMCw0LTEuNzkwOSw0LTRWMjVjMC0yLjIwOTItMS43OTEtNC00LTRaTTM3LDU2YzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0xMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMTBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0xMCwzMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMjBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0wLTEwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMTAsMzBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0wLTEwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0yMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTEwLDMwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0xMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMTBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2WiIvPjwvc3ZnPg==">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda:http-json:1" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input source="basic" target="authentication.type" />
          <zeebe:input source="{{secrets.ADMIN_USER}}" target="authentication.username" />
          <zeebe:input source="{{secrets.ADMIN_PASSWORD}}" target="authentication.password" />
          <zeebe:input source="other" target="type" />
          <zeebe:input source="{{secrets.BASE_URL}}" target="baseUrl" />
          <zeebe:input source="=&#34;/o/c/playeractions/&#34; + string(classPK)" target="path" />
          <zeebe:input source="PATCH" target="method" />
          <zeebe:input source="=baseUrl + path" target="url" />
          <zeebe:input source="=false" target="storeResponse" />
          <zeebe:input source="=20" target="connectionTimeoutInSeconds" />
          <zeebe:input source="=20" target="readTimeoutInSeconds" />
          <zeebe:input source="={&#10;      &#34;response&#34;: agent.responseText&#10;}" target="body" />
          <zeebe:input source="=false" target="ignoreNullValues" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="retryBackoff" value="PT0S" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1llxacj</bpmn:incoming>
      <bpmn:outgoing>Flow_11wnglx</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_11wnglx" sourceRef="Activity_0i2eafb" targetRef="Event_03mf5ec" />
    <bpmn:exclusiveGateway id="Gateway_1ax5ede">
      <bpmn:incoming>Flow_0u7g446</bpmn:incoming>
      <bpmn:outgoing>Flow_0v7jtpl</bpmn:outgoing>
      <bpmn:outgoing>Flow_03rhk49</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0v7jtpl" sourceRef="Gateway_1ax5ede" targetRef="Activity_0cwgxbf">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=characterId!=null</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:serviceTask id="Activity_0cwgxbf" name="Get Character" zeebe:modelerTemplate="cddb82b6-1f10-447e-a582-a18d246dd516" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgdmlld0JveD0iMCAwIDk2IDk2Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzBiNWZmZjt9PC9zdHlsZT48L2RlZnM+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNzEsMjFIMjVjLTIuMjA5MiwwLTQsMS43OTA4LTQsNHY0NmMwLDIuMjA5MSwxLjc5MDgsNCw0LDRoNDZjMi4yMDksMCw0LTEuNzkwOSw0LTRWMjVjMC0yLjIwOTItMS43OTEtNC00LTRaTTM3LDU2YzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0xMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMTBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0xMCwzMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMjBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0wLTEwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMTAsMzBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0wLTEwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0yMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTEwLDMwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0xMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMTBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2WiIvPjwvc3ZnPg==">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda:http-json:1" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input source="basic" target="authentication.type" />
          <zeebe:input source="{{secrets.ADMIN_USER}}" target="authentication.username" />
          <zeebe:input source="{{secrets.ADMIN_PASSWORD}}" target="authentication.password" />
          <zeebe:input source="other" target="type" />
          <zeebe:input source="{{secrets.BASE_URL}}" target="baseUrl" />
          <zeebe:input source="=&#34;/o/c/characters/&#34; + string(characterId)" target="path" />
          <zeebe:input source="GET" target="method" />
          <zeebe:input source="=baseUrl + path" target="url" />
          <zeebe:input source="=false" target="storeResponse" />
          <zeebe:input source="=20" target="connectionTimeoutInSeconds" />
          <zeebe:input source="=20" target="readTimeoutInSeconds" />
          <zeebe:input source="=false" target="ignoreNullValues" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultVariable" value="characterJson" />
          <zeebe:header key="resultExpression" value="={&#10;  class: string(body.class),&#10;  description: string(body.shortdescription),&#10;  name: string(body.name),&#10;  race: string(body.race),&#10;  sex: string(body.sex)&#10;}" />
          <zeebe:header key="retryBackoff" value="PT0S" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0v7jtpl</bpmn:incoming>
      <bpmn:outgoing>Flow_1254q4v</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_03rhk49" sourceRef="Gateway_1ax5ede" targetRef="Activity_0by2dzl">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=characterId=null</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1254q4v" sourceRef="Activity_0cwgxbf" targetRef="Activity_0by2dzl" />
    <bpmn:subProcess id="task_autoLoanOffer" name="Create Inventory Event Sub Process" triggeredByEvent="true">
      <bpmn:serviceTask id="Activity_1tfbi22" name="Generate Inventory" zeebe:modelerTemplate="io.camunda.connectors.OpenAI.v1" zeebe:modelerTemplateVersion="6" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjU2cHgiIGhlaWdodD0iMjYwcHgiIHZpZXdCb3g9IjAgMCAyNTYgMjYwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KICAgIDx0aXRsZT5PcGVuQUk8L3RpdGxlPgogICAgPGc+CiAgICAgICAgPHBhdGggZD0iTTIzOS4xODM5MTQsMTA2LjIwMjc4MyBDMjQ1LjA1NDMwNCw4OC41MjQyMDk2IDI0My4wMjIyOCw2OS4xNzMzODA1IDIzMy42MDc1OTksNTMuMDk5ODg2NCBDMjE5LjQ1MTY3OCwyOC40NTg4MDIxIDE5MC45OTk3MDMsMTUuNzgzNjEyOSAxNjMuMjEzMDA3LDIxLjczOTUwNSBDMTQ3LjU1NDA3Nyw0LjMyMTQ1ODgzIDEyMy43OTQ5MDksLTMuNDIzOTg1NTQgMTAwLjg3OTAxLDEuNDE4NzM4OTggQzc3Ljk2MzExMDUsNi4yNjE0NjM0OSA1OS4zNjkwMDkzLDIyLjk1NzI1MzYgNTIuMDk1OTYyMSw0NS4yMjE0MjE5IEMzMy44NDM2NDk0LDQ4Ljk2NDQ4NjcgMTguMDkwMTcyMSw2MC4zOTI3NDkgOC44NjY3MjUxMyw3Ni41ODE4MDMzIEMtNS40NDM0OTEsMTAxLjE4Mjk2MiAtMi4xOTU0NDQzMSwxMzIuMjE1MjU1IDE2Ljg5ODY2NjIsMTUzLjMyMDA5NCBDMTEuMDA2MDg2NSwxNzAuOTkwNjU2IDEzLjAxOTcyODMsMTkwLjM0Mzk5MSAyMi40MjM4MjMxLDIwNi40MjI5OTEgQzM2LjU5NzU1NTMsMjMxLjA3MjM0NCA2NS4wNjgwMzQyLDI0My43NDY1NjYgOTIuODY5NTczOCwyMzcuNzgzMzcyIEMxMDUuMjM1NjM5LDI1MS43MDgyNDkgMTIzLjAwMTExMywyNTkuNjMwOTQyIDE0MS42MjM5NjgsMjU5LjUyNjkyIEMxNzAuMTA1MzU5LDI1OS41NTIxNjkgMTk1LjMzNzYxMSwyNDEuMTY1NzE4IDIwNC4wMzc3NzcsMjE0LjA0NTY2MSBDMjIyLjI4NzM0LDIxMC4yOTYzNTYgMjM4LjAzODQ4OSwxOTguODY5NzgzIDI0Ny4yNjcwMTQsMTgyLjY4NTI4IEMyNjEuNDA0NDUzLDE1OC4xMjc1MTUgMjU4LjE0MjQ5NCwxMjcuMjYyNzc1IDIzOS4xODM5MTQsMTA2LjIwMjc4MyBMMjM5LjE4MzkxNCwxMDYuMjAyNzgzIFogTTE0MS42MjM5NjgsMjQyLjU0MTIwNyBDMTMwLjI1NTY4MiwyNDIuNTU5MTc3IDExOS4yNDM4NzYsMjM4LjU3NDY0MiAxMTAuNTE5MzgxLDIzMS4yODYxOTcgTDExMi4wNTQxNDYsMjMwLjQxNjQ5NiBMMTYzLjcyNDU5NSwyMDAuNTkwODgxIEMxNjYuMzQwNjQ4LDE5OS4wNTY0NDQgMTY3Ljk1NDMyMSwxOTYuMjU2ODE4IDE2Ny45NzA3ODEsMTkzLjIyNDAwNSBMMTY3Ljk3MDc4MSwxMjAuMzczNzg4IEwxODkuODE1NjE0LDEzMy4wMTAwMjYgQzE5MC4wMzQxMzIsMTMzLjEyMTQyMyAxOTAuMTg2MjM1LDEzMy4zMzA1NjQgMTkwLjIyNDg4NSwxMzMuNTcyNzc0IEwxOTAuMjI0ODg1LDE5My45NDAyMjkgQzE5MC4xNjg2MDMsMjIwLjc1ODQyNyAxNjguNDQyMTY2LDI0Mi40ODQ4NjQgMTQxLjYyMzk2OCwyNDIuNTQxMjA3IFogTTM3LjE1NzU3NDksMTk3LjkzMDYyIEMzMS40NTY0OTgsMTg4LjA4NjM1OSAyOS40MDk0ODE4LDE3Ni41NDY5ODQgMzEuMzc2NjIzNywxNjUuMzQyNDI2IEwzMi45MTEzODk1LDE2Ni4yNjMyODUgTDg0LjYzMjk5NzMsMTk2LjA4ODkwMSBDODcuMjM4OTM0OSwxOTcuNjE4MjA3IDkwLjQ2ODI3MTcsMTk3LjYxODIwNyA5My4wNzQyMDkzLDE5Ni4wODg5MDEgTDE1Ni4yNTU0MDIsMTU5LjY2Mzc5MyBMMTU2LjI1NTQwMiwxODQuODg1MTExIEMxNTYuMjQzNTU3LDE4NS4xNDk3NzEgMTU2LjExMTcyNSwxODUuMzk0NjAyIDE1NS44OTcyOSwxODUuNTUwMTc2IEwxMDMuNTYxNzc2LDIxNS43MzM5MDMgQzgwLjMwNTQ5NTMsMjI5LjEzMTYzMiA1MC41OTI0OTU0LDIyMS4xNjU0MzUgMzcuMTU3NTc0OSwxOTcuOTMwNjIgWiBNMjMuNTQ5MzE4MSw4NS4zODExMjczIEMyOS4yODk5ODYxLDc1LjQ3MzMwOTcgMzguMzUxMTkxMSw2Ny45MTYyNjQ4IDQ5LjEyODc0ODIsNjQuMDQ3ODgyNSBMNDkuMTI4NzQ4MiwxMjUuNDM4NTE1IEM0OS4wODkxNDkyLDEyOC40NTk0MjUgNTAuNjk2NTM4NiwxMzEuMjYyNTU2IDUzLjMyMzc3NDgsMTMyLjc1NDIzMiBMMTE2LjE5ODAxNCwxNjkuMDI1ODY0IEw5NC4zNTMxODA4LDE4MS42NjIxMDIgQzk0LjExMzIzMjUsMTgxLjc4OTQzNCA5My44MjU3NDYxLDE4MS43ODk0MzQgOTMuNTg1Nzk3OSwxODEuNjYyMTAyIEw0MS4zNTI2MDE1LDE1MS41Mjk1MzQgQzE4LjE0MTk0MjYsMTM4LjA3NjA5OCAxMC4xODE3NjgxLDEwOC4zODU1NjIgMjMuNTQ5MzE4MSw4NS4xMjUzMzMgTDIzLjU0OTMxODEsODUuMzgxMTI3MyBaIE0yMDMuMDE0NiwxMjcuMDc1NTk4IEwxMzkuOTM1NzI1LDkwLjQ0NTg1NDUgTDE2MS43Mjk0LDc3Ljg2MDc3NDggQzE2MS45NjkzNDgsNzcuNzMzNDQzNCAxNjIuMjU2ODM0LDc3LjczMzQ0MzQgMTYyLjQ5Njc4Myw3Ny44NjA3NzQ4IEwyMTQuNzI5OTc5LDEwOC4wNDQ1MDIgQzIzMS4wMzIzMjksMTE3LjQ1MTc0NyAyNDAuNDM3Mjk0LDEzNS40MjYxMDkgMjM4Ljg3MTUwNCwxNTQuMTgyNzM5IEMyMzcuMzA1NzE0LDE3Mi45MzkzNjggMjI1LjA1MDcxOSwxODkuMTA1NTcyIDIwNy40MTQyNjIsMTk1LjY3OTYzIEwyMDcuNDE0MjYyLDEzNC4yODg5OTggQzIwNy4zMjI1MjEsMTMxLjI3Njg2NyAyMDUuNjUwNjk3LDEyOC41MzU4NTMgMjAzLjAxNDYsMTI3LjA3NTU5OCBaIE0yMjQuNzU3MTE2LDk0LjM4NTA4NjcgTDIyMy4yMjIzNSw5My40NjQyMjcyIEwxNzEuNjAzMDYsNjMuMzgyODE3MyBDMTY4Ljk4MTI5Myw2MS44NDQzNzUxIDE2NS43MzI0NTYsNjEuODQ0Mzc1MSAxNjMuMTEwNjg5LDYzLjM4MjgxNzMgTDk5Ljk4MDY1NTQsOTkuODA3OTI1OSBMOTkuOTgwNjU1NCw3NC41ODY2MDc3IEM5OS45NTMzMDA0LDc0LjMyNTQwODggMTAwLjA3MTA5NSw3NC4wNzAxODY5IDEwMC4yODc2MDksNzMuOTIxNTQyNiBMMTUyLjUyMDgwNSw0My43ODg5NzM4IEMxNjguODYzMDk4LDM0LjM3NDM1MTggMTg5LjE3NDI1NiwzNS4yNTI5MDQzIDIwNC42NDI1NzksNDYuMDQzNDg0MSBDMjIwLjExMDkwMyw1Ni44MzQwNjM4IDIyNy45NDkyNjksNzUuNTkyMzk1OSAyMjQuNzU3MTE2LDk0LjE4MDQ1MTMgTDIyNC43NTcxMTYsOTQuMzg1MDg2NyBaIE04OC4wNjA2NDA5LDEzOS4wOTc5MzEgTDY2LjIxNTgwNzYsMTI2LjUxMjg1MSBDNjUuOTk1MDM5OSwxMjYuMzc5MDkxIDY1Ljg0NTA5NjUsMTI2LjE1NDE3NiA2NS44MDY1MzY3LDEyNS44OTg5NDUgTDY1LjgwNjUzNjcsNjUuNjg0OTY2IEM2NS44MzE0NDk1LDQ2LjgyODUzNjcgNzYuNzUwMDYwNSwyOS42ODQ2MDMyIDkzLjgyNzA4NTIsMjEuNjg4MzA1NSBDMTEwLjkwNDExLDEzLjY5MjAwNzkgMTMxLjA2MzgzMywxNi4yODM1NDYyIDE0NS41NjMyLDI4LjMzODk5OCBMMTQ0LjAyODQzNCwyOS4yMDg2OTg2IEw5Mi4zNTc5ODUyLDU5LjAzNDMxNDIgQzg5Ljc0MTkzMjcsNjAuNTY4NzUxMyA4OC4xMjgyNTk3LDYzLjM2ODM3NjcgODguMTExNzk5OCw2Ni40MDExOTAxIEw4OC4wNjA2NDA5LDEzOS4wOTc5MzEgWiBNOTkuOTI5NDk2NSwxMTMuNTE4NSBMMTI4LjA2Njg3LDk3LjMwMTE0MTcgTDE1Ni4yNTU0MDIsMTEzLjUxODUgTDE1Ni4yNTU0MDIsMTQ1Ljk1MzIxOCBMMTI4LjE2OTE4NywxNjIuMTcwNTc3IEw5OS45ODA2NTU0LDE0NS45NTMyMTggTDk5LjkyOTQ5NjUsMTEzLjUxODUgWiIgZmlsbD0iIzAwMDAwMCI+PC9wYXRoPgogICAgPC9nPgo8L3N2Zz4K">
        <bpmn:documentation>Use this tool to create new class and background equipment for the character whose ID comes from the webhook.</bpmn:documentation>
        <bpmn:extensionElements>
          <zeebe:taskDefinition type="io.camunda:http-json:1" />
          <zeebe:ioMapping>
            <zeebe:input source="bearer" target="authentication.type" />
            <zeebe:input source="{{secrets.AI_API_KEY}}" target="authentication.token" />
            <zeebe:input source="{{secrets.AI_API_ORG}}" target="internal_organization" />
            <zeebe:input source="=if is defined(internal_organization) and internal_organization != null then {&#34;Content-Type&#34;:&#34;application/json&#34;, &#34;OpenAI-Organization&#34;:internal_organization} else {&#34;Content-Type&#34;:&#34;application/json&#34;}" target="headers" />
            <zeebe:input source="chat" target="operation" />
            <zeebe:input source="post" target="method" />
            <zeebe:input source="https://api.openai.com/v1/chat/completions" target="url" />
            <zeebe:input source="custom" target="internal_model" />
            <zeebe:input source="{{secrets.AI_API_MODEL}}" target="internal_custom_model" />
            <zeebe:input source="1" target="internal_temperature" />
            <zeebe:input source="=&#34;Afer considering the character&#39;s class and other attributes according to D&#38;D 5, create a starter pack of inventory items, or equipment, for the given character. Max 10 items.&#10;&#10;The character&#39;s attributes, for reference, are&#10;---&#10;&#34; + userDetail + &#34;&#10;---&#10;&#10;The player&#39;s request for reference is &#10;----&#10;&#34; + prompt + &#34;&#10;----&#10;&#10;Respond in a JSON array ONLY with nothing before or after the JSON response. Response should start and end with the JSON array brackets []. Each item is a separate JSON block, encapsulated by JSON brackets, {}, and comma separated. The entire response should be encapsulated in the fields provided below. No single field can have a value containing more than 280 characters. Return results in json, not markdown. Do not prepend the response with the type \&#34;json\&#34;. The entire response must be in this format, exactly, with only the values differing based on your thinking.&#10;&#10;See the inventory item array schema below. You must use this schema when developing the response; never insert additional fields. None of the fields are mandatory but as many as possible should be included if they are appropriate for the inventory item. I included empty strings in this example so you can see all the available fields right here, but you should not include empty strings or null values: instead please leave the whole unused field element out of the JSON structure if it is not needed for the item.&#10;&#10;For the r_characterToInventoryItem_c_characterId element, set the value exactly to the characterId variable, &#34; + characterId + &#34;, as in the example. It must be identical for every array item.&#10;&#10;Example:&#10;[&#10;  {&#10;    \&#34;quantity\&#34;: 1,&#10;    \&#34;equipped\&#34;: true,&#10;    \&#34;equippable\&#34;: true,&#10;    \&#34;description\&#34;: \&#34;A standard suit of heavy armor made of interlocking metal rings. It offers solid protection but hinders stealthy movement.\&#34;,&#10;    \&#34;weight\&#34;: 55,&#10;    \&#34;message\&#34;: \&#34;Heavy and noisy, but reliable protection.\&#34;,&#10;    \&#34;type\&#34;: \&#34;Heavy Armor\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Chain Mail\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;50 gp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;,&#10;    \&#34;armorClass\&#34;: \&#34;16 (Disadvantage on Stealth)\&#34;&#10;  },&#10;  {&#10;    \&#34;damage\&#34;: \&#34;1d8 slashing\&#34;,&#10;    \&#34;quantity\&#34;: 1,&#10;    \&#34;equipped\&#34;: true,&#10;    \&#34;equippable\&#34;: true,&#10;    \&#34;description\&#34;: \&#34;A versatile martial melee weapon. A Human Fighter&#39;s reliable standard. Can be wielded one-handed (1d8) or two-handed (1d10).\&#34;,&#10;    \&#34;weight\&#34;: 3,&#10;    \&#34;message\&#34;: \&#34;Balanced and sharp.\&#34;,&#10;    \&#34;type\&#34;: \&#34;Martial Melee Weapon (Longsword)\&#34;,&#10;    \&#34;effects\&#34;: \&#34;Versatile (1d10)\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Longsword\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;15 gp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;&#10;  },&#10;  {&#10;    \&#34;quantity\&#34;: 1,&#10;    \&#34;equipped\&#34;: true,&#10;    \&#34;equippable\&#34;: true,&#10;    \&#34;description\&#34;: \&#34;A standard wooden shield banded with steel. Wielded in one hand to provide a bonus to AC.\&#34;,&#10;    \&#34;weight\&#34;: 6,&#10;    \&#34;type\&#34;: \&#34;Armor (Shield)\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Shield\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;10 gp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;,&#10;    \&#34;armorClass\&#34;: \&#34;+2 AC\&#34;&#10;  },&#10;  {&#10;    \&#34;damage\&#34;: \&#34;1d6 slashing\&#34;,&#10;    \&#34;quantity\&#34;: 2,&#10;    \&#34;equipped\&#34;: false,&#10;    \&#34;equippable\&#34;: true,&#10;    \&#34;description\&#34;: \&#34;A light axe that is balanced for throwing. Can be used as a one-handed melee weapon or a thrown weapon.\&#34;,&#10;    \&#34;weight\&#34;: 2,&#10;    \&#34;type\&#34;: \&#34;Simple Melee Weapon (Handaxe)\&#34;,&#10;    \&#34;effects\&#34;: \&#34;Thrown (range 20/60)\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Handaxe\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;5 gp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;&#10;  },&#10;  {&#10;    \&#34;quantity\&#34;: 1,&#10;    \&#34;equipped\&#34;: false,&#10;    \&#34;equippable\&#34;: false,&#10;    \&#34;description\&#34;: \&#34;A simple leather pack with straps, used to carry adventuring gear. Part of the Dungeoneer&#39;s Pack.\&#34;,&#10;    \&#34;weight\&#34;: 5,&#10;    \&#34;type\&#34;: \&#34;Adventuring Gear\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Backpack\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;2 gp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;&#10;  },&#10;  {&#10;    \&#34;quantity\&#34;: 10,&#10;    \&#34;equipped\&#34;: false,&#10;    \&#34;equippable\&#34;: true,&#10;    \&#34;description\&#34;: \&#34;A wooden rod tipped with cloth soaked in tallow. When lit, it burns for 1 hour, providing bright light in a 20-foot radius.\&#34;,&#10;    \&#34;weight\&#34;: 1,&#10;    \&#34;type\&#34;: \&#34;Adventuring Gear\&#34;,&#10;    \&#34;effects\&#34;: \&#34;1 hour of bright light (20 ft.)\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Torch\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;1 cp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;&#10;  },&#10;  {&#10;    \&#34;quantity\&#34;: 10,&#10;    \&#34;equipped\&#34;: false,&#10;    \&#34;equippable\&#34;: false,&#10;    \&#34;description\&#34;: \&#34;Dried and preserved food sufficient for one person for one day. Part of the Dungeoneer&#39;s Pack.\&#34;,&#10;    \&#34;weight\&#34;: 2,&#10;    \&#34;type\&#34;: \&#34;Adventuring Gear\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Rations (1 day)\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;5 sp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;&#10;  },&#10;  {&#10;    \&#34;quantity\&#34;: 1,&#10;    \&#34;equipped\&#34;: false,&#10;    \&#34;equippable\&#34;: false,&#10;    \&#34;description\&#34;: \&#34;A leather container, typically holding 4 pints of liquid. Currently full of fresh water. Part of the Dungeoneer&#39;s Pack.\&#34;,&#10;    \&#34;weight\&#34;: 5,&#10;    \&#34;type\&#34;: \&#34;Adventuring Gear\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Waterskin\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;2 sp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;&#10;  },&#10;  {&#10;    \&#34;quantity\&#34;: 1,&#10;    \&#34;equipped\&#34;: false,&#10;    \&#34;equippable\&#34;: false,&#10;    \&#34;description\&#34;: \&#34;A 50-foot coil of sturdy rope. Has 2 hit points and can be burst with a DC 17 Strength check. Part of the Dungeonear&#39;s Pack.\&#34;,&#10;    \&#34;weight\&#34;: 10,&#10;    \&#34;type\&#34;: \&#34;Adventuring Gear\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Hempen Rope (50 ft.)\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;1 gp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;&#10;  },&#10;  {&#10;    \&#34;quantity\&#34;: 1,&#10;    \&#34;equipped\&#34;: false,&#10;    \&#34;equippable\&#34;: false,&#10;    \&#34;description\&#34;: \&#34;A small leather pouch for holding coins and other small items. Contains 15 gold pieces.\&#34;,&#10;    \&#34;weight\&#34;: 1,&#10;    \&#34;message\&#34;: \&#34;Contains 15 gp.\&#34;,&#10;    \&#34;type\&#34;: \&#34;Adventuring Gear\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Pouch\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;5 sp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;&#10;  },&#10;  {&#10;    \&#34;quantity\&#34;: 1,&#10;    \&#34;equipped\&#34;: false,&#10;    \&#34;equippable\&#34;: false,&#10;    \&#34;description\&#34;: \&#34;A small, cloth patch embroidered with the insignia of the Fighter&#39;s former infantry regiment.\&#34;,&#10;    \&#34;weight\&#34;: 0,&#10;    \&#34;message\&#34;: \&#34;A memento from the Soldier background.\&#34;,&#10;    \&#34;type\&#34;: \&#34;Trinket\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Insignia of Rank\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;0 gp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;&#10;  }&#10;]&#34;" target="internal_prompt" />
            <zeebe:input source="1" target="internal_choices" />
            <zeebe:input source="=append(concatenate(if is defined(internal_systemMessage) then [{&#34;role&#34;: &#34;system&#34;, &#34;content&#34;: internal_systemMessage}] else [], if is defined(internal_chatHistory) then internal_chatHistory else []), {&#34;role&#34;: &#34;user&#34;, &#34;content&#34;: internal_prompt})" target="internal_messages" />
            <zeebe:input source="={&#34;model&#34;: if is defined(internal_custom_model) then internal_custom_model else internal_model, &#34;messages&#34;: internal_messages, &#34;n&#34;: number(internal_choices), &#34;temperature&#34;: number(internal_temperature)}" target="body" />
            <zeebe:input source="60" target="connectionTimeoutInSeconds" />
          </zeebe:ioMapping>
          <zeebe:taskHeaders>
            <zeebe:header key="resultVariable" value="toolCallResult" />
            <zeebe:header key="resultExpression" value="={ &#10;  itemDetailOriginal:response.body.choices[1].message.content,&#10;  itemDetail:&#10;   &#10;replace(replace(replace(replace(response.body.choices[1].message.content, &#34;\\n&#34;, &#34;&#34;), &#34;```json\\n&#34;, &#34;&#34;), &#34;\\n```&#34;, &#34;&#34;), &#34;.*?(\[[\\s\\S]*\]).*&#34;, &#34;$1&#34;)&#10;}" />
            <zeebe:header key="elementTemplateVersion" value="6" />
            <zeebe:header key="elementTemplateId" value="io.camunda.connectors.OpenAI.v1" />
          </zeebe:taskHeaders>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1o4fl5z</bpmn:incoming>
        <bpmn:outgoing>Flow_0ybt6bl</bpmn:outgoing>
      </bpmn:serviceTask>
      <bpmn:serviceTask id="Activity_0hfojim" name="Add Inventory" zeebe:modelerTemplate="cddb82b6-1f10-447e-a582-a18d246dd516" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgdmlld0JveD0iMCAwIDk2IDk2Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzBiNWZmZjt9PC9zdHlsZT48L2RlZnM+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNzEsMjFIMjVjLTIuMjA5MiwwLTQsMS43OTA4LTQsNHY0NmMwLDIuMjA5MSwxLjc5MDgsNCw0LDRoNDZjMi4yMDksMCw0LTEuNzkwOSw0LTRWMjVjMC0yLjIwOTItMS43OTEtNC00LTRaTTM3LDU2YzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0xMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMTBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0xMCwzMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMjBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0wLTEwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMTAsMzBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0wLTEwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0yMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTEwLDMwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0xMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMTBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2WiIvPjwvc3ZnPg==">
        <bpmn:extensionElements>
          <zeebe:taskDefinition type="io.camunda:http-json:1" retries="3" />
          <zeebe:ioMapping>
            <zeebe:input source="basic" target="authentication.type" />
            <zeebe:input source="{{secrets.ADMIN_USER}}" target="authentication.username" />
            <zeebe:input source="{{secrets.ADMIN_PASSWORD}}" target="authentication.password" />
            <zeebe:input source="other" target="type" />
            <zeebe:input source="{{secrets.BASE_URL}}" target="baseUrl" />
            <zeebe:input source="=&#34;/o/c/inventoryitems/batch&#34;" target="path" />
            <zeebe:input source="POST" target="method" />
            <zeebe:input source="=baseUrl + path" target="url" />
            <zeebe:input source="=false" target="storeResponse" />
            <zeebe:input source="=20" target="connectionTimeoutInSeconds" />
            <zeebe:input source="=20" target="readTimeoutInSeconds" />
            <zeebe:input source="=itemDetail" target="body" />
            <zeebe:input source="=false" target="ignoreNullValues" />
          </zeebe:ioMapping>
          <zeebe:taskHeaders>
            <zeebe:header key="resultVariable" value="newInventoryItem" />
            <zeebe:header key="resultExpression" value="={&#10;  inventoryItemId: body.id&#10;}" />
            <zeebe:header key="retryBackoff" value="PT0S" />
          </zeebe:taskHeaders>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_0ybt6bl</bpmn:incoming>
      </bpmn:serviceTask>
      <bpmn:sequenceFlow id="Flow_0ybt6bl" sourceRef="Activity_1tfbi22" targetRef="Activity_0hfojim" />
      <bpmn:startEvent id="Event_1g10rbb" name="Create Initial Inventory Signal" isInterrupting="false">
        <bpmn:outgoing>Flow_14a6oh1</bpmn:outgoing>
        <bpmn:signalEventDefinition id="SignalEventDefinition_0j2j4az" signalRef="Signal_3rksb93" />
      </bpmn:startEvent>
      <bpmn:intermediateCatchEvent id="Event_0bbu5pp">
        <bpmn:incoming>Flow_14a6oh1</bpmn:incoming>
        <bpmn:outgoing>Flow_1o4fl5z</bpmn:outgoing>
        <bpmn:timerEventDefinition id="TimerEventDefinition_0og1kwl">
          <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT10S</bpmn:timeDuration>
        </bpmn:timerEventDefinition>
      </bpmn:intermediateCatchEvent>
      <bpmn:sequenceFlow id="Flow_14a6oh1" sourceRef="Event_1g10rbb" targetRef="Event_0bbu5pp" />
      <bpmn:sequenceFlow id="Flow_1o4fl5z" sourceRef="Event_0bbu5pp" targetRef="Activity_1tfbi22" />
    </bpmn:subProcess>
    <bpmn:subProcess id="Activity_084nzhz" name="Create Quest Map Event Sub Process" triggeredByEvent="true">
      <bpmn:serviceTask id="Activity_1lwfi00" name="Generate Quest Map" zeebe:modelerTemplate="io.camunda.connectors.OpenAI.v1" zeebe:modelerTemplateVersion="6" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjU2cHgiIGhlaWdodD0iMjYwcHgiIHZpZXdCb3g9IjAgMCAyNTYgMjYwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KICAgIDx0aXRsZT5PcGVuQUk8L3RpdGxlPgogICAgPGc+CiAgICAgICAgPHBhdGggZD0iTTIzOS4xODM5MTQsMTA2LjIwMjc4MyBDMjQ1LjA1NDMwNCw4OC41MjQyMDk2IDI0My4wMjIyOCw2OS4xNzMzODA1IDIzMy42MDc1OTksNTMuMDk5ODg2NCBDMjE5LjQ1MTY3OCwyOC40NTg4MDIxIDE5MC45OTk3MDMsMTUuNzgzNjEyOSAxNjMuMjEzMDA3LDIxLjczOTUwNSBDMTQ3LjU1NDA3Nyw0LjMyMTQ1ODgzIDEyMy43OTQ5MDksLTMuNDIzOTg1NTQgMTAwLjg3OTAxLDEuNDE4NzM4OTggQzc3Ljk2MzExMDUsNi4yNjE0NjM0OSA1OS4zNjkwMDkzLDIyLjk1NzI1MzYgNTIuMDk1OTYyMSw0NS4yMjE0MjE5IEMzMy44NDM2NDk0LDQ4Ljk2NDQ4NjcgMTguMDkwMTcyMSw2MC4zOTI3NDkgOC44NjY3MjUxMyw3Ni41ODE4MDMzIEMtNS40NDM0OTEsMTAxLjE4Mjk2MiAtMi4xOTU0NDQzMSwxMzIuMjE1MjU1IDE2Ljg5ODY2NjIsMTUzLjMyMDA5NCBDMTEuMDA2MDg2NSwxNzAuOTkwNjU2IDEzLjAxOTcyODMsMTkwLjM0Mzk5MSAyMi40MjM4MjMxLDIwNi40MjI5OTEgQzM2LjU5NzU1NTMsMjMxLjA3MjM0NCA2NS4wNjgwMzQyLDI0My43NDY1NjYgOTIuODY5NTczOCwyMzcuNzgzMzcyIEMxMDUuMjM1NjM5LDI1MS43MDgyNDkgMTIzLjAwMTExMywyNTkuNjMwOTQyIDE0MS42MjM5NjgsMjU5LjUyNjkyIEMxNzAuMTA1MzU5LDI1OS41NTIxNjkgMTk1LjMzNzYxMSwyNDEuMTY1NzE4IDIwNC4wMzc3NzcsMjE0LjA0NTY2MSBDMjIyLjI4NzM0LDIxMC4yOTYzNTYgMjM4LjAzODQ4OSwxOTguODY5NzgzIDI0Ny4yNjcwMTQsMTgyLjY4NTI4IEMyNjEuNDA0NDUzLDE1OC4xMjc1MTUgMjU4LjE0MjQ5NCwxMjcuMjYyNzc1IDIzOS4xODM5MTQsMTA2LjIwMjc4MyBMMjM5LjE4MzkxNCwxMDYuMjAyNzgzIFogTTE0MS42MjM5NjgsMjQyLjU0MTIwNyBDMTMwLjI1NTY4MiwyNDIuNTU5MTc3IDExOS4yNDM4NzYsMjM4LjU3NDY0MiAxMTAuNTE5MzgxLDIzMS4yODYxOTcgTDExMi4wNTQxNDYsMjMwLjQxNjQ5NiBMMTYzLjcyNDU5NSwyMDAuNTkwODgxIEMxNjYuMzQwNjQ4LDE5OS4wNTY0NDQgMTY3Ljk1NDMyMSwxOTYuMjU2ODE4IDE2Ny45NzA3ODEsMTkzLjIyNDAwNSBMMTY3Ljk3MDc4MSwxMjAuMzczNzg4IEwxODkuODE1NjE0LDEzMy4wMTAwMjYgQzE5MC4wMzQxMzIsMTMzLjEyMTQyMyAxOTAuMTg2MjM1LDEzMy4zMzA1NjQgMTkwLjIyNDg4NSwxMzMuNTcyNzc0IEwxOTAuMjI0ODg1LDE5My45NDAyMjkgQzE5MC4xNjg2MDMsMjIwLjc1ODQyNyAxNjguNDQyMTY2LDI0Mi40ODQ4NjQgMTQxLjYyMzk2OCwyNDIuNTQxMjA3IFogTTM3LjE1NzU3NDksMTk3LjkzMDYyIEMzMS40NTY0OTgsMTg4LjA4NjM1OSAyOS40MDk0ODE4LDE3Ni41NDY5ODQgMzEuMzc2NjIzNywxNjUuMzQyNDI2IEwzMi45MTEzODk1LDE2Ni4yNjMyODUgTDg0LjYzMjk5NzMsMTk2LjA4ODkwMSBDODcuMjM4OTM0OSwxOTcuNjE4MjA3IDkwLjQ2ODI3MTcsMTk3LjYxODIwNyA5My4wNzQyMDkzLDE5Ni4wODg5MDEgTDE1Ni4yNTU0MDIsMTU5LjY2Mzc5MyBMMTU2LjI1NTQwMiwxODQuODg1MTExIEMxNTYuMjQzNTU3LDE4NS4xNDk3NzEgMTU2LjExMTcyNSwxODUuMzk0NjAyIDE1NS44OTcyOSwxODUuNTUwMTc2IEwxMDMuNTYxNzc2LDIxNS43MzM5MDMgQzgwLjMwNTQ5NTMsMjI5LjEzMTYzMiA1MC41OTI0OTU0LDIyMS4xNjU0MzUgMzcuMTU3NTc0OSwxOTcuOTMwNjIgWiBNMjMuNTQ5MzE4MSw4NS4zODExMjczIEMyOS4yODk5ODYxLDc1LjQ3MzMwOTcgMzguMzUxMTkxMSw2Ny45MTYyNjQ4IDQ5LjEyODc0ODIsNjQuMDQ3ODgyNSBMNDkuMTI4NzQ4MiwxMjUuNDM4NTE1IEM0OS4wODkxNDkyLDEyOC40NTk0MjUgNTAuNjk2NTM4NiwxMzEuMjYyNTU2IDUzLjMyMzc3NDgsMTMyLjc1NDIzMiBMMTE2LjE5ODAxNCwxNjkuMDI1ODY0IEw5NC4zNTMxODA4LDE4MS42NjIxMDIgQzk0LjExMzIzMjUsMTgxLjc4OTQzNCA5My44MjU3NDYxLDE4MS43ODk0MzQgOTMuNTg1Nzk3OSwxODEuNjYyMTAyIEw0MS4zNTI2MDE1LDE1MS41Mjk1MzQgQzE4LjE0MTk0MjYsMTM4LjA3NjA5OCAxMC4xODE3NjgxLDEwOC4zODU1NjIgMjMuNTQ5MzE4MSw4NS4xMjUzMzMgTDIzLjU0OTMxODEsODUuMzgxMTI3MyBaIE0yMDMuMDE0NiwxMjcuMDc1NTk4IEwxMzkuOTM1NzI1LDkwLjQ0NTg1NDUgTDE2MS43Mjk0LDc3Ljg2MDc3NDggQzE2MS45NjkzNDgsNzcuNzMzNDQzNCAxNjIuMjU2ODM0LDc3LjczMzQ0MzQgMTYyLjQ5Njc4Myw3Ny44NjA3NzQ4IEwyMTQuNzI5OTc5LDEwOC4wNDQ1MDIgQzIzMS4wMzIzMjksMTE3LjQ1MTc0NyAyNDAuNDM3Mjk0LDEzNS40MjYxMDkgMjM4Ljg3MTUwNCwxNTQuMTgyNzM5IEMyMzcuMzA1NzE0LDE3Mi45MzkzNjggMjI1LjA1MDcxOSwxODkuMTA1NTcyIDIwNy40MTQyNjIsMTk1LjY3OTYzIEwyMDcuNDE0MjYyLDEzNC4yODg5OTggQzIwNy4zMjI1MjEsMTMxLjI3Njg2NyAyMDUuNjUwNjk3LDEyOC41MzU4NTMgMjAzLjAxNDYsMTI3LjA3NTU5OCBaIE0yMjQuNzU3MTE2LDk0LjM4NTA4NjcgTDIyMy4yMjIzNSw5My40NjQyMjcyIEwxNzEuNjAzMDYsNjMuMzgyODE3MyBDMTY4Ljk4MTI5Myw2MS44NDQzNzUxIDE2NS43MzI0NTYsNjEuODQ0Mzc1MSAxNjMuMTEwNjg5LDYzLjM4MjgxNzMgTDk5Ljk4MDY1NTQsOTkuODA3OTI1OSBMOTkuOTgwNjU1NCw3NC41ODY2MDc3IEM5OS45NTMzMDA0LDc0LjMyNTQwODggMTAwLjA3MTA5NSw3NC4wNzAxODY5IDEwMC4yODc2MDksNzMuOTIxNTQyNiBMMTUyLjUyMDgwNSw0My43ODg5NzM4IEMxNjguODYzMDk4LDM0LjM3NDM1MTggMTg5LjE3NDI1NiwzNS4yNTI5MDQzIDIwNC42NDI1NzksNDYuMDQzNDg0MSBDMjIwLjExMDkwMyw1Ni44MzQwNjM4IDIyNy45NDkyNjksNzUuNTkyMzk1OSAyMjQuNzU3MTE2LDk0LjE4MDQ1MTMgTDIyNC43NTcxMTYsOTQuMzg1MDg2NyBaIE04OC4wNjA2NDA5LDEzOS4wOTc5MzEgTDY2LjIxNTgwNzYsMTI2LjUxMjg1MSBDNjUuOTk1MDM5OSwxMjYuMzc5MDkxIDY1Ljg0NTA5NjUsMTI2LjE1NDE3NiA2NS44MDY1MzY3LDEyNS44OTg5NDUgTDY1LjgwNjUzNjcsNjUuNjg0OTY2IEM2NS44MzE0NDk1LDQ2LjgyODUzNjcgNzYuNzUwMDYwNSwyOS42ODQ2MDMyIDkzLjgyNzA4NTIsMjEuNjg4MzA1NSBDMTEwLjkwNDExLDEzLjY5MjAwNzkgMTMxLjA2MzgzMywxNi4yODM1NDYyIDE0NS41NjMyLDI4LjMzODk5OCBMMTQ0LjAyODQzNCwyOS4yMDg2OTg2IEw5Mi4zNTc5ODUyLDU5LjAzNDMxNDIgQzg5Ljc0MTkzMjcsNjAuNTY4NzUxMyA4OC4xMjgyNTk3LDYzLjM2ODM3NjcgODguMTExNzk5OCw2Ni40MDExOTAxIEw4OC4wNjA2NDA5LDEzOS4wOTc5MzEgWiBNOTkuOTI5NDk2NSwxMTMuNTE4NSBMMTI4LjA2Njg3LDk3LjMwMTE0MTcgTDE1Ni4yNTU0MDIsMTEzLjUxODUgTDE1Ni4yNTU0MDIsMTQ1Ljk1MzIxOCBMMTI4LjE2OTE4NywxNjIuMTcwNTc3IEw5OS45ODA2NTU0LDE0NS45NTMyMTggTDk5LjkyOTQ5NjUsMTEzLjUxODUgWiIgZmlsbD0iIzAwMDAwMCI+PC9wYXRoPgogICAgPC9nPgo8L3N2Zz4K">
        <bpmn:documentation>Use this tool to create new class and background equipment for the character whose ID comes from the webhook.</bpmn:documentation>
        <bpmn:extensionElements>
          <zeebe:taskDefinition type="io.camunda:http-json:1" />
          <zeebe:ioMapping>
            <zeebe:input source="bearer" target="authentication.type" />
            <zeebe:input source="{{secrets.AI_API_KEY}}" target="authentication.token" />
            <zeebe:input source="{{secrets.AI_API_ORG}}" target="internal_organization" />
            <zeebe:input source="=if is defined(internal_organization) and internal_organization != null then {&#34;Content-Type&#34;:&#34;application/json&#34;, &#34;OpenAI-Organization&#34;:internal_organization} else {&#34;Content-Type&#34;:&#34;application/json&#34;}" target="headers" />
            <zeebe:input source="chat" target="operation" />
            <zeebe:input source="post" target="method" />
            <zeebe:input source="https://api.openai.com/v1/chat/completions" target="url" />
            <zeebe:input source="custom" target="internal_model" />
            <zeebe:input source="{{secrets.AI_API_MODEL}}" target="internal_custom_model" />
            <zeebe:input source="1" target="internal_temperature" />
            <zeebe:input source="=&#34;Afer considering the character&#39;s class and other attributes according to D&#38;D 5, create a starter pack of inventory items, or equipment, for the given character. Max 10 items.&#10;&#10;The character&#39;s attributes, for reference, are&#10;---&#10;&#34; + userDetail + &#34;&#10;---&#10;&#10;The player&#39;s request for reference is &#10;----&#10;&#34; + prompt + &#34;&#10;----&#10;&#10;Respond in a JSON array ONLY with nothing before or after the JSON response. Response should start and end with the JSON array brackets []. Each item is a separate JSON block, encapsulated by JSON brackets, {}, and comma separated. The entire response should be encapsulated in the fields provided below. No single field can have a value containing more than 280 characters. Return results in json, not markdown. Do not prepend the response with the type \&#34;json\&#34;. The entire response must be in this format, exactly, with only the values differing based on your thinking.&#10;&#10;See the inventory item array schema below. You must use this schema when developing the response; never insert additional fields. None of the fields are mandatory but as many as possible should be included if they are appropriate for the inventory item. I included empty strings in this example so you can see all the available fields right here, but you should not include empty strings or null values: instead please leave the whole unused field element out of the JSON structure if it is not needed for the item.&#10;&#10;For the r_characterToInventoryItem_c_characterId element, set the value exactly to the characterId variable, &#34; + characterId + &#34;, as in the example. It must be identical for every array item.&#10;&#10;Example:&#10;[&#10;  {&#10;    \&#34;quantity\&#34;: 1,&#10;    \&#34;equipped\&#34;: true,&#10;    \&#34;equippable\&#34;: true,&#10;    \&#34;description\&#34;: \&#34;A standard suit of heavy armor made of interlocking metal rings. It offers solid protection but hinders stealthy movement.\&#34;,&#10;    \&#34;weight\&#34;: 55,&#10;    \&#34;message\&#34;: \&#34;Heavy and noisy, but reliable protection.\&#34;,&#10;    \&#34;type\&#34;: \&#34;Heavy Armor\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Chain Mail\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;50 gp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;,&#10;    \&#34;armorClass\&#34;: \&#34;16 (Disadvantage on Stealth)\&#34;&#10;  },&#10;  {&#10;    \&#34;damage\&#34;: \&#34;1d8 slashing\&#34;,&#10;    \&#34;quantity\&#34;: 1,&#10;    \&#34;equipped\&#34;: true,&#10;    \&#34;equippable\&#34;: true,&#10;    \&#34;description\&#34;: \&#34;A versatile martial melee weapon. A Human Fighter&#39;s reliable standard. Can be wielded one-handed (1d8) or two-handed (1d10).\&#34;,&#10;    \&#34;weight\&#34;: 3,&#10;    \&#34;message\&#34;: \&#34;Balanced and sharp.\&#34;,&#10;    \&#34;type\&#34;: \&#34;Martial Melee Weapon (Longsword)\&#34;,&#10;    \&#34;effects\&#34;: \&#34;Versatile (1d10)\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Longsword\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;15 gp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;&#10;  },&#10;  {&#10;    \&#34;quantity\&#34;: 1,&#10;    \&#34;equipped\&#34;: true,&#10;    \&#34;equippable\&#34;: true,&#10;    \&#34;description\&#34;: \&#34;A standard wooden shield banded with steel. Wielded in one hand to provide a bonus to AC.\&#34;,&#10;    \&#34;weight\&#34;: 6,&#10;    \&#34;type\&#34;: \&#34;Armor (Shield)\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Shield\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;10 gp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;,&#10;    \&#34;armorClass\&#34;: \&#34;+2 AC\&#34;&#10;  },&#10;  {&#10;    \&#34;damage\&#34;: \&#34;1d6 slashing\&#34;,&#10;    \&#34;quantity\&#34;: 2,&#10;    \&#34;equipped\&#34;: false,&#10;    \&#34;equippable\&#34;: true,&#10;    \&#34;description\&#34;: \&#34;A light axe that is balanced for throwing. Can be used as a one-handed melee weapon or a thrown weapon.\&#34;,&#10;    \&#34;weight\&#34;: 2,&#10;    \&#34;type\&#34;: \&#34;Simple Melee Weapon (Handaxe)\&#34;,&#10;    \&#34;effects\&#34;: \&#34;Thrown (range 20/60)\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Handaxe\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;5 gp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;&#10;  },&#10;  {&#10;    \&#34;quantity\&#34;: 1,&#10;    \&#34;equipped\&#34;: false,&#10;    \&#34;equippable\&#34;: false,&#10;    \&#34;description\&#34;: \&#34;A simple leather pack with straps, used to carry adventuring gear. Part of the Dungeoneer&#39;s Pack.\&#34;,&#10;    \&#34;weight\&#34;: 5,&#10;    \&#34;type\&#34;: \&#34;Adventuring Gear\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Backpack\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;2 gp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;&#10;  },&#10;  {&#10;    \&#34;quantity\&#34;: 10,&#10;    \&#34;equipped\&#34;: false,&#10;    \&#34;equippable\&#34;: true,&#10;    \&#34;description\&#34;: \&#34;A wooden rod tipped with cloth soaked in tallow. When lit, it burns for 1 hour, providing bright light in a 20-foot radius.\&#34;,&#10;    \&#34;weight\&#34;: 1,&#10;    \&#34;type\&#34;: \&#34;Adventuring Gear\&#34;,&#10;    \&#34;effects\&#34;: \&#34;1 hour of bright light (20 ft.)\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Torch\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;1 cp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;&#10;  },&#10;  {&#10;    \&#34;quantity\&#34;: 10,&#10;    \&#34;equipped\&#34;: false,&#10;    \&#34;equippable\&#34;: false,&#10;    \&#34;description\&#34;: \&#34;Dried and preserved food sufficient for one person for one day. Part of the Dungeoneer&#39;s Pack.\&#34;,&#10;    \&#34;weight\&#34;: 2,&#10;    \&#34;type\&#34;: \&#34;Adventuring Gear\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Rations (1 day)\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;5 sp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;&#10;  },&#10;  {&#10;    \&#34;quantity\&#34;: 1,&#10;    \&#34;equipped\&#34;: false,&#10;    \&#34;equippable\&#34;: false,&#10;    \&#34;description\&#34;: \&#34;A leather container, typically holding 4 pints of liquid. Currently full of fresh water. Part of the Dungeoneer&#39;s Pack.\&#34;,&#10;    \&#34;weight\&#34;: 5,&#10;    \&#34;type\&#34;: \&#34;Adventuring Gear\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Waterskin\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;2 sp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;&#10;  },&#10;  {&#10;    \&#34;quantity\&#34;: 1,&#10;    \&#34;equipped\&#34;: false,&#10;    \&#34;equippable\&#34;: false,&#10;    \&#34;description\&#34;: \&#34;A 50-foot coil of sturdy rope. Has 2 hit points and can be burst with a DC 17 Strength check. Part of the Dungeonear&#39;s Pack.\&#34;,&#10;    \&#34;weight\&#34;: 10,&#10;    \&#34;type\&#34;: \&#34;Adventuring Gear\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Hempen Rope (50 ft.)\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;1 gp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;&#10;  },&#10;  {&#10;    \&#34;quantity\&#34;: 1,&#10;    \&#34;equipped\&#34;: false,&#10;    \&#34;equippable\&#34;: false,&#10;    \&#34;description\&#34;: \&#34;A small leather pouch for holding coins and other small items. Contains 15 gold pieces.\&#34;,&#10;    \&#34;weight\&#34;: 1,&#10;    \&#34;message\&#34;: \&#34;Contains 15 gp.\&#34;,&#10;    \&#34;type\&#34;: \&#34;Adventuring Gear\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Pouch\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;5 sp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;&#10;  },&#10;  {&#10;    \&#34;quantity\&#34;: 1,&#10;    \&#34;equipped\&#34;: false,&#10;    \&#34;equippable\&#34;: false,&#10;    \&#34;description\&#34;: \&#34;A small, cloth patch embroidered with the insignia of the Fighter&#39;s former infantry regiment.\&#34;,&#10;    \&#34;weight\&#34;: 0,&#10;    \&#34;message\&#34;: \&#34;A memento from the Soldier background.\&#34;,&#10;    \&#34;type\&#34;: \&#34;Trinket\&#34;,&#10;    \&#34;itemName\&#34;: \&#34;Insignia of Rank\&#34;,&#10;    \&#34;r_characterToInventoryItem_c_characterId\&#34;: &#34; + characterId + &#34;,&#10;    \&#34;value\&#34;: \&#34;0 gp\&#34;,&#10;    \&#34;rarity\&#34;: \&#34;Common\&#34;&#10;  }&#10;]&#34;" target="internal_prompt" />
            <zeebe:input source="1" target="internal_choices" />
            <zeebe:input source="=append(concatenate(if is defined(internal_systemMessage) then [{&#34;role&#34;: &#34;system&#34;, &#34;content&#34;: internal_systemMessage}] else [], if is defined(internal_chatHistory) then internal_chatHistory else []), {&#34;role&#34;: &#34;user&#34;, &#34;content&#34;: internal_prompt})" target="internal_messages" />
            <zeebe:input source="={&#34;model&#34;: if is defined(internal_custom_model) then internal_custom_model else internal_model, &#34;messages&#34;: internal_messages, &#34;n&#34;: number(internal_choices), &#34;temperature&#34;: number(internal_temperature)}" target="body" />
            <zeebe:input source="60" target="connectionTimeoutInSeconds" />
          </zeebe:ioMapping>
          <zeebe:taskHeaders>
            <zeebe:header key="resultVariable" value="toolCallResult" />
            <zeebe:header key="resultExpression" value="={ &#10;  itemDetailOriginal:response.body.choices[1].message.content,&#10;  itemDetail:&#10;   &#10;replace(replace(replace(replace(response.body.choices[1].message.content, &#34;\\n&#34;, &#34;&#34;), &#34;```json\\n&#34;, &#34;&#34;), &#34;\\n```&#34;, &#34;&#34;), &#34;.*?(\[[\\s\\S]*\]).*&#34;, &#34;$1&#34;)&#10;}" />
            <zeebe:header key="elementTemplateVersion" value="6" />
            <zeebe:header key="elementTemplateId" value="io.camunda.connectors.OpenAI.v1" />
          </zeebe:taskHeaders>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1uharfy</bpmn:incoming>
        <bpmn:outgoing>Flow_0jjmwdv</bpmn:outgoing>
      </bpmn:serviceTask>
      <bpmn:serviceTask id="Activity_07qzguc" name="Add Quest Map" zeebe:modelerTemplate="cddb82b6-1f10-447e-a582-a18d246dd516" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgdmlld0JveD0iMCAwIDk2IDk2Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzBiNWZmZjt9PC9zdHlsZT48L2RlZnM+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNzEsMjFIMjVjLTIuMjA5MiwwLTQsMS43OTA4LTQsNHY0NmMwLDIuMjA5MSwxLjc5MDgsNCw0LDRoNDZjMi4yMDksMCw0LTEuNzkwOSw0LTRWMjVjMC0yLjIwOTItMS43OTEtNC00LTRaTTM3LDU2YzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0xMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMTBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0xMCwzMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMjBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0wLTEwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMTAsMzBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2Wm0wLTEwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0yMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTEwLDMwYzAsLjU1MjItLjQ0NzgsMS0xLDFoLTZjLS41NTIyLDAtMS0uNDQ3OC0xLTF2LTZjMC0uNTUyMiwuNDQ3OC0xLDEtMWg2Yy41NTIyLDAsMSwuNDQ3OCwxLDF2NlptMC0xMGMwLC41NTIyLS40NDc4LDEtMSwxaC02Yy0uNTUyMiwwLTEtLjQ0NzgtMS0xdi02YzAtLjU1MjIsLjQ0NzgtMSwxLTFoNmMuNTUyMiwwLDEsLjQ0NzgsMSwxdjZabTAtMTBjMCwuNTUyMi0uNDQ3OCwxLTEsMWgtNmMtLjU1MjIsMC0xLS40NDc4LTEtMXYtNmMwLS41NTIyLC40NDc4LTEsMS0xaDZjLjU1MjIsMCwxLC40NDc4LDEsMXY2WiIvPjwvc3ZnPg==">
        <bpmn:extensionElements>
          <zeebe:taskDefinition type="io.camunda:http-json:1" retries="3" />
          <zeebe:ioMapping>
            <zeebe:input source="basic" target="authentication.type" />
            <zeebe:input source="{{secrets.ADMIN_USER}}" target="authentication.username" />
            <zeebe:input source="{{secrets.ADMIN_PASSWORD}}" target="authentication.password" />
            <zeebe:input source="other" target="type" />
            <zeebe:input source="{{secrets.BASE_URL}}" target="baseUrl" />
            <zeebe:input source="=&#34;/o/c/inventoryitems/batch&#34;" target="path" />
            <zeebe:input source="POST" target="method" />
            <zeebe:input source="=baseUrl + path" target="url" />
            <zeebe:input source="=false" target="storeResponse" />
            <zeebe:input source="=20" target="connectionTimeoutInSeconds" />
            <zeebe:input source="=20" target="readTimeoutInSeconds" />
            <zeebe:input source="=itemDetail" target="body" />
            <zeebe:input source="=false" target="ignoreNullValues" />
          </zeebe:ioMapping>
          <zeebe:taskHeaders>
            <zeebe:header key="resultVariable" value="newInventoryItem" />
            <zeebe:header key="resultExpression" value="={&#10;  inventoryItemId: body.id&#10;}" />
            <zeebe:header key="retryBackoff" value="PT0S" />
          </zeebe:taskHeaders>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_0jjmwdv</bpmn:incoming>
      </bpmn:serviceTask>
      <bpmn:intermediateCatchEvent id="Event_1350gxw">
        <bpmn:outgoing>Flow_1uharfy</bpmn:outgoing>
        <bpmn:timerEventDefinition id="TimerEventDefinition_14bnj5v">
          <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT10S</bpmn:timeDuration>
        </bpmn:timerEventDefinition>
      </bpmn:intermediateCatchEvent>
      <bpmn:startEvent id="Event_0lyf2va" name="Create Quest&#10;Â Map Signal" isInterrupting="false">
        <bpmn:signalEventDefinition id="SignalEventDefinition_03mn623" signalRef="Signal_2uvsga2" />
      </bpmn:startEvent>
      <bpmn:sequenceFlow id="Flow_1uharfy" sourceRef="Event_1350gxw" targetRef="Activity_1lwfi00" />
      <bpmn:sequenceFlow id="Flow_0jjmwdv" sourceRef="Activity_1lwfi00" targetRef="Activity_07qzguc" />
    </bpmn:subProcess>
  </bpmn:process>
  <bpmn:escalation id="Escalation_3v2ip13" name="createInitialInventory" escalationCode="createInitialInventory" />
  <bpmn:escalation id="Escalation_1f8slh2" name="autoLoan" escalationCode="autoLoan" />
  <bpmn:signal id="Signal_3rksb93" name="createInitialInventory" />
  <bpmn:message id="Message_2so7s33" name="createCharacterInventory">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=characterId" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:signal id="Signal_2uvsga2" name="createQuestMap" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_0cm02vc">
      <bpmndi:BPMNShape id="Event_03mf5ec_di" bpmnElement="Event_03mf5ec">
        <dc:Bounds x="1082" y="142" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1076" y="105" width="47" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_00z467z_di" bpmnElement="aiTools" isExpanded="true" bioc:stroke="#6b3c00" bioc:fill="#ffe0b2" color:background-color="#ffe0b2" color:border-color="#6b3c00">
        <dc:Bounds x="340" y="370" width="690" height="470" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1sy07jb" bpmnElement="AIRulesAndLore">
        <dc:Bounds x="730" y="430" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0crv9x6" bpmnElement="Activity_0p65jq1">
        <dc:Bounds x="890" y="430" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1ngpm3s" bpmnElement="AICreateQuest">
        <dc:Bounds x="370" y="700" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_14nhj4a" bpmnElement="CreateQuest" bioc:stroke="#0d4372" bioc:fill="#bbdefb" color:background-color="#bbdefb" color:border-color="#0d4372">
        <dc:Bounds x="530" y="700" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0wo2x1k" bpmnElement="AIOpenChest">
        <dc:Bounds x="730" y="573" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1kk64c8" bpmnElement="OpenchestAddIntentory" bioc:stroke="#0d4372" bioc:fill="#bbdefb" color:background-color="#bbdefb" color:border-color="#0d4372">
        <dc:Bounds x="890" y="573" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0ir1g89" bpmnElement="Activity_11t1fvq" bioc:stroke="#0d4372" bioc:fill="#bbdefb" color:background-color="#bbdefb" color:border-color="#0d4372">
        <dc:Bounds x="530" y="573" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1iexjko" bpmnElement="AIUpdateCharacterReskin">
        <dc:Bounds x="370" y="573" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_14k5rat" bpmnElement="Activity_09goiqg" bioc:stroke="#0d4372" bioc:fill="#bbdefb" color:background-color="#bbdefb" color:border-color="#0d4372">
        <dc:Bounds x="530" y="430" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0pcgnr5" bpmnElement="AICreateCharacter">
        <dc:Bounds x="377" y="430" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1egifdt_di" bpmnElement="Event_035wec5">
        <dc:Bounds x="482" y="522" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_01px91k" bpmnElement="Event_11wvqt1">
        <dc:Bounds x="682" y="722" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1ypb7rv_di" bpmnElement="Flow_1ypb7rv">
        <di:waypoint x="470" y="740" />
        <di:waypoint x="530" y="740" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0mh929v_di" bpmnElement="Flow_0mh929v">
        <di:waypoint x="470" y="613" />
        <di:waypoint x="530" y="613" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0su35oo_di" bpmnElement="Flow_0su35oo">
        <di:waypoint x="830" y="613" />
        <di:waypoint x="890" y="613" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1nxoofd_di" bpmnElement="Flow_1nxoofd">
        <di:waypoint x="477" y="470" />
        <di:waypoint x="530" y="470" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_11iqg7s_di" bpmnElement="Flow_11iqg7s">
        <di:waypoint x="427" y="510" />
        <di:waypoint x="427" y="540" />
        <di:waypoint x="482" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1u8u6yk_di" bpmnElement="Flow_1u8u6yk">
        <di:waypoint x="630" y="740" />
        <di:waypoint x="682" y="740" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Gateway_13hafhq_di" bpmnElement="Gateway_13hafhq" isMarkerVisible="true">
        <dc:Bounds x="855" y="233" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="836" y="196" width="88" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0ftesrs_di" bpmnElement="Gateway_0ftesrs" isMarkerVisible="true">
        <dc:Bounds x="545" y="233" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1clcfsu_di" bpmnElement="Activity_01xvqn0" bioc:stroke="#6b3c00" bioc:fill="#ffe0b2" color:background-color="#ffe0b2" color:border-color="#6b3c00">
        <dc:Bounds x="680" y="218" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_1_di" bpmnElement="StartEvent_AIDMChat_1" bioc:stroke="#0d4372" bioc:fill="#bbdefb" color:background-color="#bbdefb" color:border-color="#0d4372">
        <dc:Bounds x="152" y="132" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="139" y="80" width="62" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_06kf9tc_di" bpmnElement="Activity_0by2dzl">
        <dc:Bounds x="350" y="218" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0ge4m4k_di" bpmnElement="Activity_0i2eafb" bioc:stroke="#0d4372" bioc:fill="#bbdefb" color:background-color="#bbdefb" color:border-color="#0d4372">
        <dc:Bounds x="1050" y="218" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1ax5ede_di" bpmnElement="Gateway_1ax5ede" isMarkerVisible="true">
        <dc:Bounds x="245" y="125" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_00mzpkp" bpmnElement="Activity_0cwgxbf" bioc:stroke="#0d4372" bioc:fill="#bbdefb" color:background-color="#bbdefb" color:border-color="#0d4372">
        <dc:Bounds x="220" y="218" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1oblunn_di" bpmnElement="task_autoLoanOffer" isExpanded="true">
        <dc:Bounds x="1060" y="610" width="440" height="170" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0p9717q" bpmnElement="Activity_1tfbi22" bioc:stroke="#6b3c00" bioc:fill="#ffe0b2" color:background-color="#ffe0b2" color:border-color="#6b3c00">
        <dc:Bounds x="1220" y="670" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1ofgdqx" bpmnElement="Activity_0hfojim" bioc:stroke="#0d4372" bioc:fill="#bbdefb" color:background-color="#bbdefb" color:border-color="#0d4372">
        <dc:Bounds x="1370" y="670" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1t07wuk_di" bpmnElement="Event_1g10rbb">
        <dc:Bounds x="1100" y="662" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1079" y="625" width="79" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1bx1ub4_di" bpmnElement="Event_0bbu5pp">
        <dc:Bounds x="1100" y="722" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_12h6tw0" bpmnElement="Flow_0ybt6bl">
        <di:waypoint x="1320" y="710" />
        <di:waypoint x="1370" y="710" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_14a6oh1_di" bpmnElement="Flow_14a6oh1">
        <di:waypoint x="1118" y="698" />
        <di:waypoint x="1118" y="722" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1o4fl5z_di" bpmnElement="Flow_1o4fl5z">
        <di:waypoint x="1136" y="740" />
        <di:waypoint x="1178" y="740" />
        <di:waypoint x="1178" y="710" />
        <di:waypoint x="1220" y="710" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="BPMNShape_1ccvtin" bpmnElement="Activity_084nzhz" isExpanded="true">
        <dc:Bounds x="1060" y="400" width="440" height="170" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0kfzere" bpmnElement="Activity_1lwfi00" bioc:stroke="#6b3c00" bioc:fill="#ffe0b2" color:background-color="#ffe0b2" color:border-color="#6b3c00">
        <dc:Bounds x="1220" y="460" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1u1nsmm" bpmnElement="Activity_07qzguc" bioc:stroke="#0d4372" bioc:fill="#bbdefb" color:background-color="#bbdefb" color:border-color="#0d4372">
        <dc:Bounds x="1370" y="460" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_18fzdqz" bpmnElement="Event_1350gxw">
        <dc:Bounds x="1100" y="512" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0kjgnii" bpmnElement="Event_0lyf2va">
        <dc:Bounds x="1100" y="452" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1085" y="415" width="66" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_1v8x78q" bpmnElement="Flow_1uharfy">
        <di:waypoint x="1136" y="530" />
        <di:waypoint x="1178" y="530" />
        <di:waypoint x="1178" y="500" />
        <di:waypoint x="1220" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0zbnxjs" bpmnElement="Flow_0jjmwdv">
        <di:waypoint x="1320" y="500" />
        <di:waypoint x="1370" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1llxacj_di" bpmnElement="Flow_1llxacj">
        <di:waypoint x="905" y="258" />
        <di:waypoint x="1050" y="258" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1013" y="240" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0sbvwpf_di" bpmnElement="Flow_0sbvwpf">
        <di:waypoint x="880" y="283" />
        <di:waypoint x="880" y="370" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="886" y="321" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0yh4ha0_di" bpmnElement="Flow_0yh4ha0">
        <di:waypoint x="595" y="258" />
        <di:waypoint x="680" y="258" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1rupk0u_di" bpmnElement="Flow_1rupk0u">
        <di:waypoint x="570" y="370" />
        <di:waypoint x="570" y="283" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1vkq7i5_di" bpmnElement="Flow_1vkq7i5">
        <di:waypoint x="780" y="258" />
        <di:waypoint x="855" y="258" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0u7g446_di" bpmnElement="Flow_0u7g446">
        <di:waypoint x="188" y="150" />
        <di:waypoint x="245" y="150" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0m99pwe_di" bpmnElement="Flow_0m99pwe">
        <di:waypoint x="450" y="258" />
        <di:waypoint x="545" y="258" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_11wnglx_di" bpmnElement="Flow_11wnglx">
        <di:waypoint x="1100" y="218" />
        <di:waypoint x="1100" y="178" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0v7jtpl_di" bpmnElement="Flow_0v7jtpl">
        <di:waypoint x="270" y="175" />
        <di:waypoint x="270" y="218" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_03rhk49_di" bpmnElement="Flow_03rhk49">
        <di:waypoint x="295" y="150" />
        <di:waypoint x="400" y="150" />
        <di:waypoint x="400" y="218" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1254q4v_di" bpmnElement="Flow_1254q4v">
        <di:waypoint x="320" y="258" />
        <di:waypoint x="350" y="258" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
